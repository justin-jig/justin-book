---
title: "Socket & Stream ê¸°ë°˜ ì‹¤ì‹œê°„ ë¹„ë™ê¸° í†µì‹  (Real-time Asynchronous Communication)"
date: 2025-10-26
---


#### ìš”ì•½

- **Socket / Stream ê¸°ë°˜ ë¹„ë™ê¸° í†µì‹ **ì€ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ **ì§€ì†ì ì¸ ì—°ê²° ìƒíƒœì—ì„œ ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì£¼ê³ ë°›ëŠ” êµ¬ì¡°**ì´ë‹¤.  
- ëŒ€í‘œ ê¸°ìˆ :
  1. **WebSocket** â€” ì–‘ë°©í–¥ í†µì‹  (Client â†” Server)
  2. **SSE (Server-Sent Events)** â€” ë‹¨ë°©í–¥ ì‹¤ì‹œê°„ í‘¸ì‹œ (Server â†’ Client)
  3. **gRPC Stream** â€” í”„ë¡œí† ì½œ ë²„í¼ ê¸°ë°˜ ì–‘ë°©í–¥ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°
- ì‹¤ì‹œê°„ ì•Œë¦¼, ëŒ€ì‹œë³´ë“œ, ì±„íŒ…, IoT, ë°ì´í„° í”¼ë“œ ë“±ì—ì„œ ì‚¬ìš©ëœë‹¤.

> ì‹¤ì‹œê°„ ë¹„ë™ê¸° í†µì‹ ì€ â€œì§€ì† ì—°ê²°â€ì„ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„° íë¦„ì„ ê´€ë¦¬í•œë‹¤.
>
> * **WebSocket** â†’ ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹  (ì±„íŒ…, í˜‘ì—…, ì•Œë¦¼ ë“±)
> * **SSE** â†’ ë‹¨ë°©í–¥ í‘¸ì‹œ, ë‹¨ìˆœ ëŒ€ì‹œë³´ë“œí˜• ì„œë¹„ìŠ¤
> * **gRPC Stream** â†’ ê³ ì„±ëŠ¥, êµ¬ì¡°ì  ì„œë¹„ìŠ¤ ê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¼
>
> ê° í”„ë ˆì„ì›Œí¬ëŠ” ì´ ì„¸ ê°€ì§€ ê¸°ìˆ ì„ ëª¨ë‘ ì§€ì›í•˜ë©°,
> ëª©ì ì— ë§ëŠ” í†µì‹  ë°©ì‹ì„ ì„ íƒí•˜ë©´ **ì§€ì† ì—°ê²° ê¸°ë°˜ì˜ ì•ˆì •ì ì¸ ë¹„ë™ê¸° ì‹œìŠ¤í…œ**ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
> REST APIëŠ” ìš”ì²­/ì‘ë‹µ ëª¨ë¸ì— í•œì •ë˜ì§€ë§Œ,  
> **Socket & Stream** êµ¬ì¡°ëŠ” ì—°ê²°ì„ ìœ ì§€í•œ ì±„ ë°ì´í„° ë³€í™”ë¥¼ â€œì¦‰ì‹œ í‘¸ì‹œâ€í•  ìˆ˜ ìˆì–´  
> **ì €ì§€ì—° ì‹¤ì‹œê°„ ì„œë¹„ìŠ¤** êµ¬í˜„ì— ìµœì í™”ë˜ì–´ ìˆë‹¤.

---

##### ì°¸ê³ ìë£Œ

- [WebSocket RFC 6455](https://datatracker.ietf.org/doc/html/rfc6455)
- [Server-Sent Events (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)
- [gRPC Streaming](https://grpc.io/docs/what-is-grpc/core-concepts/)
- [Spring WebSocket Docs](https://docs.spring.io/spring-framework/reference/web/websocket.html)
- [FastAPI WebSocket Docs](https://fastapi.tiangolo.com/advanced/websockets/)
- [NestJS WebSocket](https://docs.nestjs.com/websockets/gateways)

---

### 1. ì‹¤ì‹œê°„ ë¹„ë™ê¸° í†µì‹  êµ¬ì¡° ê°œìš”

```mermaid
flowchart LR
  Client -- "open connection" --> Server
  Server -- "push event/data" --> Client
  Client -- "send ack / message" --> Server
```

| ê¸°ìˆ               | ì—°ê²° ìœ ì§€ ë°©ì‹         | ë°©í–¥ì„±                | íŠ¹ì§•              |
| --------------- | ---------------- | ------------------ | --------------- |
| **WebSocket**   | TCP ì–‘ë°©í–¥ ì±„ë„       | ì–‘ë°©í–¥                | ì±„íŒ…Â·ê²Œì„Â·í˜‘ì—…íˆ´       |
| **SSE**         | HTTP ë‹¨ì¼ ì—°ê²°       | ë‹¨ë°©í–¥(Serverâ†’Client) | ì•Œë¦¼Â·ëŒ€ì‹œë³´ë“œÂ·ë¡œê·¸ ìŠ¤íŠ¸ë¦¼  |
| **gRPC Stream** | HTTP/2 ê¸°ë°˜ ì§€ì† ìŠ¤íŠ¸ë¦¼ | ì–‘ë°©í–¥ / ë‹¨ë°©í–¥          | ê³ ì„±ëŠ¥Â·ë°”ì´ë„ˆë¦¬ ê¸°ë°˜Â·IoT |

---

## 2. Spring Boot â€” `WebSocket / SSE / gRPC Stream`

### 2.1 Gradle ì„¤ì •

```kotlin
// build.gradle.kts
dependencies {
    implementation("org.springframework.boot:spring-boot-starter-websocket")
    implementation("org.springframework.boot:spring-boot-starter-webflux")
    implementation("net.devh:grpc-server-spring-boot-starter:3.0.0")
}
```

---

### 2.2 WebSocket êµ¬í˜„

```kotlin
// WebSocketConfig.kt
@Configuration
@EnableWebSocket
class WebSocketConfig : WebSocketConfigurer {
    override fun registerWebSocketHandlers(registry: WebSocketHandlerRegistry) {
        registry.addHandler(ChatHandler(), "/ws/chat").setAllowedOrigins("*")
    }
}

// ChatHandler.kt
class ChatHandler : TextWebSocketHandler() {
    override fun handleTextMessage(session: WebSocketSession, message: TextMessage) {
        println("ğŸ“¨ Received: ${message.payload}")
        session.sendMessage(TextMessage("Echo: ${message.payload}"))
    }
}
```

---

### 2.3 Server-Sent Events (SSE)

```kotlin
@RestController
@RequestMapping("/sse")
class SseController {
    @GetMapping("/stream", produces = [MediaType.TEXT_EVENT_STREAM_VALUE])
    fun stream(): Flux<String> {
        return Flux.interval(Duration.ofSeconds(1))
            .map { "data: heartbeat-${System.currentTimeMillis()}\n\n" }
    }
}
```

> âœ… **íŠ¹ì§•:**
>
> * HTTP ì—°ê²°ì„ ìœ ì§€í•˜ë©° ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ë¡œ ë°ì´í„°ë¥¼ ì§€ì† ì „ì†¡
> * ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ Spring WebFluxë¡œ êµ¬í˜„ ê°€ëŠ¥
> * ë¸Œë¼ìš°ì € ê¸°ë³¸ ì§€ì›(EventSource API)

---

### 2.4 gRPC Stream ì˜ˆì‹œ

```proto
// chat.proto
syntax = "proto3";
service ChatService {
  rpc Chat(stream ChatMessage) returns (stream ChatMessage);
}
message ChatMessage {
  string user = 1;
  string message = 2;
}
```

> âš™ï¸ Spring Bootì—ì„œ `net.devh.grpc` Starterë¥¼ ì‚¬ìš©í•˜ë©´
> gRPC ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì„¤ì •ì„ ê°„ë‹¨íˆ í†µí•© ê°€ëŠ¥.

---

## 3. FastAPI â€” `WebSocket / SSE`

### 3.1 WebSocket

```python
from fastapi import FastAPI, WebSocket

app = FastAPI()

@app.websocket("/ws/chat")
async def chat(websocket: WebSocket):
    await websocket.accept()
    while True:
        data = await websocket.receive_text()
        await websocket.send_text(f"Echo: {data}")
```

---

### 3.2 Server-Sent Events

```python
from fastapi.responses import StreamingResponse
import asyncio

@app.get("/sse")
async def sse():
    async def event_stream():
        while True:
            yield f"data: heartbeat-{int(asyncio.get_event_loop().time())}\n\n"
            await asyncio.sleep(1)
    return StreamingResponse(event_stream(), media_type="text/event-stream")
```

> ğŸ’¡ **íŠ¹ì§•:**
> FastAPIëŠ” ASGI ê¸°ë°˜ì´ë¯€ë¡œ WebSocketê³¼ SSE ëª¨ë‘ ë¹„ë™ê¸° ë£¨í”„ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•œë‹¤.

---

## 4. Express / NestJS â€” `socket.io / ws / SSE`

### 4.1 Express WebSocket (ws)

```bash
npm install ws
```

```javascript
// server.js
import { WebSocketServer } from "ws";

const wss = new WebSocketServer({ port: 8080 });
wss.on("connection", (ws) => {
  console.log("ğŸ”— Connected");
  ws.on("message", (msg) => ws.send(`Echo: ${msg}`));
});
```

---

### 4.2 Express SSE

```javascript
import express from "express";
const app = express();

app.get("/sse", (req, res) => {
  res.setHeader("Content-Type", "text/event-stream");
  res.setHeader("Cache-Control", "no-cache");

  const interval = setInterval(() => {
    res.write(`data: ${Date.now()}\n\n`);
  }, 1000);

  req.on("close", () => clearInterval(interval));
});

app.listen(3000, () => console.log("ğŸš€ SSE Server running"));
```

---

### 4.3 NestJS WebSocket Gateway

```typescript
import {
  WebSocketGateway,
  SubscribeMessage,
  MessageBody,
  WebSocketServer,
} from "@nestjs/websockets";
import { Server } from "socket.io";

@WebSocketGateway({ cors: true })
export class ChatGateway {
  @WebSocketServer() server: Server;

  @SubscribeMessage("message")
  handleMessage(@MessageBody() message: string) {
    console.log("ğŸ“¨", message);
    this.server.emit("message", `Echo: ${message}`);
  }
}
```

> âœ… **íŠ¹ì§•:**
>
> * `socket.io` ê¸°ë°˜ìœ¼ë¡œ WebSocket + fallback(HTTP long-polling) ëª¨ë‘ ì§€ì›
> * NestJSì˜ DI ì»¨í…ìŠ¤íŠ¸ì™€ ê²°í•©ë˜ì–´ ëª¨ë“ˆ ë‹¨ìœ„ ê´€ë¦¬ ìš©ì´

---

## 5. ë¹„êµ ë° ìš´ì˜ ì „ëµ

| í•­ëª©         | WebSocket            | SSE                | gRPC Stream                  |
| ---------- | -------------------- | ------------------ | ---------------------------- |
| **ì—°ê²° ë°©í–¥**  | ì–‘ë°©í–¥                  | ë‹¨ë°©í–¥(Serverâ†’Client) | ì–‘ë°©í–¥                          |
| **í”„ë¡œí† ì½œ**   | TCP / WS             | HTTP               | HTTP/2                       |
| **ë°ì´í„° í¬ë§·** | Text / JSON          | Text               | Binary (protobuf)            |
| **ì§€ì› í™˜ê²½**  | Browser, Mobile, IoT | Browser ì¤‘ì‹¬         | Microservice / Native Client |
| **ì¥ì **     | ë¹ ë¥¸ ì‘ë‹µ, ìŒë°©í–¥           | ê°„ë‹¨, ë¸Œë¼ìš°ì € ë‚´ì¥        | íš¨ìœ¨ì , ê³ ì„±ëŠ¥                     |
| **ë‹¨ì **     | ì—°ê²° ê´€ë¦¬ ë³µì¡             | í´ë¼ì´ì–¸íŠ¸â†’ì„œë²„ ì „ì†¡ ë¶ˆê°€     | ì„¤ì • ë³µì¡, ë””ë²„ê¹… ì–´ë ¤ì›€               |
| **ì ìš© ì‚¬ë¡€**  | ì±„íŒ…, ê²Œì„, í˜‘ì—…           | ëŒ€ì‹œë³´ë“œ, ì•Œë¦¼           | IoT, ML ëª¨ë¸ ìŠ¤íŠ¸ë¦¼               |

---

## 6. ì„ íƒ ê°€ì´ë“œ

| ì‹œë‚˜ë¦¬ì˜¤                      | ê¶Œì¥ ê¸°ìˆ            | ì´ìœ               |
| ------------------------- | --------------- | --------------- |
| **ì–‘ë°©í–¥ í†µì‹ (ì±„íŒ…, í˜‘ì—…íˆ´)**       | WebSocket       | ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì–‘ë°©í–¥     |
| **ëŒ€ì‹œë³´ë“œ / ì•Œë¦¼ í‘¸ì‹œ**          | SSE             | ë‹¨ë°©í–¥, ì €ë¶€í•˜        |
| **ML/IoT ë°ì´í„° ìŠ¤íŠ¸ë¦¼**        | gRPC Stream     | Binary ê³ ì† ì „ì†¡    |
| **ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ì´ë²¤íŠ¸ ë¸Œë¡œë“œìºìŠ¤íŠ¸**   | SSE / socket.io | ë‹¨ìˆœ í‘¸ì‹œ ì¤‘ì‹¬        |
| **Microservice ê°„ ì‹¤ì‹œê°„ í†µì‹ ** | gRPC Stream     | í”„ë¡œí† ì½œ í†µí•© ë° ì„±ëŠ¥ ìš°ìˆ˜ |

---

### ğŸ“Š í”„ë ˆì„ì›Œí¬ë³„ ì§€ì› í˜„í™©

| Framework            | WebSocket          | SSE         | gRPC Stream       |
| -------------------- | ------------------ | ----------- | ----------------- |
| **Spring Boot**      | âœ…                  | âœ… (WebFlux) | âœ… (net.devh.grpc) |
| **FastAPI**          | âœ…                  | âœ…           | âš™ï¸ (grpc.aio)     |
| **Express / NestJS** | âœ… (socket.io / ws) | âœ…           | âš™ï¸ (grpc-js)      |

---

### ìš´ì˜ ëª¨ë‹ˆí„°ë§ íŒ

| í•­ëª©            | ì„¤ëª…                            | ë„êµ¬                                  |
| ------------- | ----------------------------- | ----------------------------------- |
| **ì—°ê²° ìˆ˜ ëª¨ë‹ˆí„°ë§** | WebSocket ì„¸ì…˜ ì¹´ìš´íŠ¸ / SSE ì—°ê²° ìœ ì§€ìœ¨ | Prometheus + Custom Metrics         |
| **ë©”ì‹œì§€ ì²˜ë¦¬ëŸ‰**   | ì´ˆë‹¹ ì†¡ìˆ˜ì‹  ì´ë²¤íŠ¸                    | Grafana Dashboard                   |
| **ì—ëŸ¬ ì¶”ì **     | ì—°ê²° ëŠê¹€, Ping/Pong ì‹¤íŒ¨           | Loki / ELK Stack                    |
| **ìŠ¤ì¼€ì¼ë§**      | Sticky Session í•„ìš” (WebSocket) | Nginx / HAProxy / Socket.io Adapter |

---
