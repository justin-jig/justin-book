---
title: "Express ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬ ë° í‘œì¤€ ì‘ë‹µ êµ¬ì¡°"
date: 2025-10-24
---

**version**  
Node.js 22.x / Express 5.x / TypeScript 5.x

---

### ìš”ì•½  
Express ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í’ˆì§ˆì€ â€œì—ëŸ¬ë¥¼ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ê°€â€ì— ë”°ë¼ ê²°ì •ëœë‹¤.  
ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬ë¥¼ í†µí•´ ì˜ˆì™¸ ìƒí™©ì„ í†µì œí•˜ë©´,  
ì¼ê´€ëœ ì‘ë‹µ í¬ë§·ê³¼ ë¡œê¹… êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë©´ì„œ ë””ë²„ê¹…ê³¼ ìš´ì˜ íš¨ìœ¨ì„±ì„ ë†’ì¼ ìˆ˜ ìžˆë‹¤.  

ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬ëŠ” Express ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¼ê´€ì„±ê³¼ ì•ˆì •ì„±ì„ ë³´ìž¥í•œë‹¤.
AppError í´ëž˜ìŠ¤ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì˜ˆì™¸ë¥¼ êµ¬ì¡°í™”í•˜ë©´,
ëª¨ë“  ì˜¤ë¥˜ê°€ ë™ì¼í•œ í¬ë§·ìœ¼ë¡œ ê¸°ë¡ë˜ê³  ì‘ë‹µëœë‹¤.
ì´ ë°©ì‹ì€ ë””ë²„ê¹… íš¨ìœ¨ë¿ ì•„ë‹ˆë¼ API ì‹ ë¢°ì„±ì„ ë†’ì´ëŠ” í•µì‹¬ ìš”ì†Œë‹¤.

í•µì‹¬ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  
- Express ì—ëŸ¬ ì²˜ë¦¬ ê¸°ë³¸ ì›ë¦¬  
- ì¤‘ì•™ì§‘ì¤‘ì‹(Global) ì—ëŸ¬ í•¸ë“¤ëŸ¬ êµ¬ì„±  
- ì‚¬ìš©ìž ì •ì˜ ì˜ˆì™¸ í´ëž˜ìŠ¤ ì„¤ê³„  
- ì—ëŸ¬ ë¡œê·¸ ë° ì‘ë‹µ í¬ë§· í‘œì¤€í™”  
- ë¹„ë™ê¸° í•¸ë“¤ëŸ¬ ì˜¤ë¥˜ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°  

---

##### ì°¸ê³ ìžë£Œ  
- [Express Error Handling Docs](https://expressjs.com/en/guide/error-handling.html)  
- [OWASP API Security Guidelines](https://owasp.org/www-project-api-security/)  
- [RFC 7807: Problem Details for HTTP APIs](https://datatracker.ietf.org/doc/html/rfc7807)  

---

#### 1. Express ì—ëŸ¬ ì²˜ë¦¬ ê¸°ë³¸ êµ¬ì¡°  

ExpressëŠ” ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ ë§ˆì§€ë§‰ì— ì—ëŸ¬ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜í•˜ì—¬  
ëª¨ë“  ì˜ˆì™¸ë¥¼ ì¤‘ì•™ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.  

```typescript
// server.ts
import express from "express";
import { errorHandler } from "./middlewares/error-handler";

const app = express();
app.use(express.json());

// ì¼ë°˜ ë¼ìš°í„°
app.get("/", (req, res) => {
  throw new Error("Unexpected error occurred");
});

// ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬ ë“±ë¡
app.use(errorHandler);

app.listen(3000, () => console.log("ðŸš€ Server running"));
```

---

#### 2. ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬ êµ¬í˜„

```typescript
// src/middlewares/error-handler.ts
import { Request, Response, NextFunction } from "express";

export const errorHandler = (
  err: any,
  req: Request,
  res: Response,
  next: NextFunction
) => {
  const status = err.status || 500;
  const message = err.message || "Internal Server Error";

  console.error(`[${new Date().toISOString()}] ${req.method} ${req.url} â†’ ${message}`);

  res.status(status).json({
    success: false,
    error: {
      message,
      code: status,
      timestamp: new Date().toISOString(),
      path: req.url,
    },
  });
};
```

ëª¨ë“  ì˜ˆì™¸ëŠ” ì´ í•¸ë“¤ëŸ¬ë¥¼ í†µí•´ ì²˜ë¦¬ë˜ë©°,
ë¡œê·¸ëŠ” ì„œë²„ ì½˜ì†” ë˜ëŠ” ë¡œê¹… ì‹œìŠ¤í…œìœ¼ë¡œ ì „ì†¡ëœë‹¤.

---

#### 3. ì‚¬ìš©ìž ì •ì˜ ì˜ˆì™¸ í´ëž˜ìŠ¤ ì„¤ê³„

ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ì˜ˆì™¸ë¥¼ ëª…í™•ížˆ í‘œí˜„í•˜ê¸° ìœ„í•´
ì‚¬ìš©ìž ì •ì˜ ì—ëŸ¬ í´ëž˜ìŠ¤ë¥¼ ì •ì˜í•  ìˆ˜ ìžˆë‹¤.

```typescript
// src/utils/errors.ts
export class AppError extends Error {
  status: number;

  constructor(message: string, status: number = 500) {
    super(message);
    this.status = status;
  }
}

export class NotFoundError extends AppError {
  constructor(resource: string) {
    super(`${resource} not found`, 404);
  }
}

export class ValidationError extends AppError {
  constructor(message: string) {
    super(message, 400);
  }
}
```

---

#### 4. ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œì˜ ì—ëŸ¬ ë°œìƒ ì²˜ë¦¬

```typescript
// src/controllers/user.controller.ts
import { Request, Response, NextFunction } from "express";
import { NotFoundError } from "../utils/errors";
import * as userService from "../services/user.service";

export const getUserById = async (req: Request, res: Response, next: NextFunction) => {
  try {
    const user = await userService.getUserById(Number(req.params.id));
    if (!user) throw new NotFoundError("User");
    res.json({ success: true, data: user });
  } catch (err) {
    next(err); // ì „ì—­ í•¸ë“¤ëŸ¬ë¡œ ì „ë‹¬
  }
};
```

Expressì—ì„œëŠ” `next(err)`ë¥¼ í˜¸ì¶œí•˜ë©´
ìžë™ìœ¼ë¡œ ë§ˆì§€ë§‰ error-handler ë¯¸ë“¤ì›¨ì–´ê°€ ì‹¤í–‰ëœë‹¤.

---

#### 5. ë¹„ë™ê¸° ì—ëŸ¬ í•¸ë“¤ë§ ìœ í‹¸ë¦¬í‹°

ë¹„ë™ê¸° ë¼ìš°í„°ì—ì„œ `try-catch`ë¥¼ ë°˜ë³µí•˜ëŠ” ëŒ€ì‹ ,
ê³µí†µ ëž˜í¼ ìœ í‹¸ì„ ì‚¬ìš©í•´ ê°„ê²°í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìžˆë‹¤.

```typescript
// src/utils/async-handler.ts
import { Request, Response, NextFunction } from "express";

export const asyncHandler =
  (fn: Function) => (req: Request, res: Response, next: NextFunction) =>
    Promise.resolve(fn(req, res, next)).catch(next);
```

```typescript
// ì ìš© ì˜ˆì‹œ
router.get("/:id", asyncHandler(userController.getUserById));
```

---

#### 6. í‘œì¤€ ì‘ë‹µ êµ¬ì¡°

ëª¨ë“  API ì‘ë‹µì€ ë‹¤ìŒ JSON êµ¬ì¡°ë¥¼ ë”°ë¼ì•¼ í•œë‹¤.

| í•„ë“œ          | ì„¤ëª…     | ì˜ˆì‹œ                                             |
| ----------- | ------ | ---------------------------------------------- |
| **success** | ì„±ê³µ ì—¬ë¶€  | `true` / `false`                               |
| **data**    | ê²°ê³¼ ë°ì´í„° | `{ "id": 1, "email": "user@example.com" }`     |
| **error**   | ì˜¤ë¥˜ ìƒì„¸  | `{ "message": "User not found", "code": 404 }` |

ì˜ˆì‹œ â€“ ì •ìƒ ì‘ë‹µ:

```json
{
  "success": true,
  "data": { "id": 3, "name": "Ingeun" }
}
```

ì˜ˆì‹œ â€“ ì—ëŸ¬ ì‘ë‹µ:

```json
{
  "success": false,
  "error": {
    "message": "Invalid input data",
    "code": 400,
    "timestamp": "2025-10-24T14:32:12.123Z",
    "path": "/api/v1/users"
  }
}
```

---

#### 7. ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ì—°ë™

ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë‹¨ìˆœ ì½˜ì†” ì¶œë ¥ ëŒ€ì‹ 
ë¡œê¹… ì‹œìŠ¤í…œ(Logstash, Winston, Pino, Loki ë“±)ê³¼ ì—°ë™í•´ì•¼ í•œë‹¤.

```typescript
import winston from "winston";

export const logger = winston.createLogger({
  transports: [new winston.transports.Console()],
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
});
```

```typescript
logger.error({
  level: "error",
  message: err.message,
  status: err.status,
  url: req.url,
  stack: err.stack,
});
```

ì´ë¥¼ í†µí•´ ìž¥ì•  ë¶„ì„, API í˜¸ì¶œ ì¶”ì , SLA ë³´ê³ ì„œ ìž‘ì„±ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

---

#### 8. ì—ëŸ¬ ì½”ë“œ ë¶„ë¥˜ ì²´ê³„

| ì½”ë“œ      | ì˜ë¯¸                    | ì„¤ëª…         |
| ------- | --------------------- | ---------- |
| **400** | Bad Request           | ìš”ì²­ íŒŒë¼ë¯¸í„° ì˜¤ë¥˜ |
| **401** | Unauthorized          | ì¸ì¦ ì‹¤íŒ¨      |
| **403** | Forbidden             | ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ   |
| **404** | Not Found             | ë¦¬ì†ŒìŠ¤ ì—†ìŒ     |
| **409** | Conflict              | ì¤‘ë³µ ë¦¬ì†ŒìŠ¤ ë°œìƒ  |
| **500** | Internal Server Error | ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜   |

ëª¨ë“  ì—ëŸ¬ëŠ” AppError ê¸°ë°˜ìœ¼ë¡œ í¬ë§· í†µì¼ì„ ìœ ì§€í•œë‹¤.

---

#### 9. ì „ì²´ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ëž¨

```mermaid
%%{init: {"theme": "default", "themeVariables": {"fontSize":"14px"}}}%%
flowchart TD
    A["Router / Controller"] --> B["Service / Repository"]
    B --> C["Error ë°œìƒ"]
    C --> D["AppError / Custom Error"]
    D --> E["Global Error Handler"]
    E --> F["Logger (Winston / Loki)"]
    E --> G["Standard JSON Response"]
```

---


