---
title: "ì—ëŸ¬ í‘œí˜„ í‘œì¤€ (Error Representation Standard)"
date: 2025-10-25
---

#### ìš”ì•½

- API ì—ëŸ¬ë¥¼ í‘œí˜„í•˜ëŠ” í‘œì¤€ í˜•ì‹ì„ ì •ì˜í•˜ì—¬, í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì¼ê´€ì„± ìˆê²Œ ìœ ì§€í•¨.  
- RFC 7807 (â€œProblem Details for HTTP APIsâ€)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—ëŸ¬ êµ¬ì¡°ë¥¼ ì •ì˜í•˜ê³ ,  
  ê° ì–¸ì–´ë³„ ì „ì—­ í•¸ë“¤ëŸ¬ì—ì„œ ê³µí†µ JSON í˜•ì‹ì„ ë°˜í™˜í•˜ëŠ” ë°©ë²•ì„ ì œì‹œí•¨.  
- **FastAPI / Spring Boot / Express / NestJS** ì „ìš© ì˜ˆì‹œë¥¼ í¬í•¨í•¨.

> ì¼ê´€ëœ ì—ëŸ¬ í‘œí˜„ì€ **APIì˜ í’ˆì§ˆì„ ê²°ì •ì§“ëŠ” í•µì‹¬ ìš”ì†Œ**ì´ë‹¤.
>
> ì—ëŸ¬ëŠ” ì‚¬ìš©ìì—ê²Œ â€œë¬¸ì œë¥¼ ì„¤ëª…í•˜ëŠ” ë¬¸ì¥â€ì´ ì•„ë‹Œ,
> **ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°í™”ëœ ë°ì´í„°**ë¡œ í‘œí˜„ë˜ì–´ì•¼ í•œë‹¤.
>
> RFC 7807 ê¸°ë°˜ í‘œì¤€ì„ ë„ì…í•˜ë©´
>
> * API ë¬¸ì„œí™” ìë™í™”(Swagger ì—°ë™)
> * í´ë¼ì´ì–¸íŠ¸ í•¸ë“¤ë§ í†µí•©
> * ë¡œê·¸/ëª¨ë‹ˆí„°ë§ ì—°ê³„
>   ë¥¼ í•œ ë²ˆì— ë‹¬ì„±í•  ìˆ˜ ìˆë‹¤.


> ì—ëŸ¬ëŠ” ë‹¨ìˆœ ë©”ì‹œì§€ê°€ ì•„ë‹ˆë¼, **í´ë¼ì´ì–¸íŠ¸ê°€ ì¡°ì¹˜ ê°€ëŠ¥í•œ ì •ë³´**ë¡œ í‘œí˜„ë˜ì–´ì•¼ í•œë‹¤.

---

##### ì°¸ê³ ìë£Œ

- [RFC 7807 - Problem Details for HTTP APIs](https://datatracker.ietf.org/doc/html/rfc7807)
- [MDN HTTP ìƒíƒœ ì½”ë“œ ì •ë¦¬](https://developer.mozilla.org/ko/docs/Web/HTTP/Status)
- [Spring Boot Error Handling](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.developing-web-applications.error-handling)
- [NestJS Exception Filters](https://docs.nestjs.com/exception-filters)
- [FastAPI Exception Handling](https://fastapi.tiangolo.com/tutorial/handling-errors/)

---

#### 1. ì—ëŸ¬ ì‘ë‹µì˜ í•„ìš”ì„±

ì—ëŸ¬ í‘œí˜„ì˜ ëª©ì ì€ ë‹¨ìˆœíˆ â€œì‹¤íŒ¨ë¥¼ ì•Œë¦¬ëŠ” ê²ƒâ€ì´ ì•„ë‹ˆë¼,  
**ë¬¸ì œì˜ ì›ì¸, ìœ„ì¹˜, í•´ê²° ë°©í–¥**ì„ í´ë¼ì´ì–¸íŠ¸ê°€ ì´í•´í•  ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ê²ƒì´ë‹¤.

| êµ¬ë¶„ | ì˜ëª»ëœ ì˜ˆì‹œ | ì˜¬ë°”ë¥¸ ì˜ˆì‹œ |
|------|--------------|--------------|
| **ë¹„í‘œì¤€ ì‘ë‹µ** | `"Something went wrong"` | âœ… `"InvalidParameter: username is required"` |
| **ë¶ˆëª…í™•í•œ êµ¬ì¡°** | `500 Internal Server Error` | âœ… êµ¬ì¡°í™”ëœ `type`, `title`, `detail`, `instance` í•„ë“œ |

---

#### 2. RFC 7807 ê¸°ë°˜ í‘œì¤€ êµ¬ì¡°

RFC 7807ì€ HTTP API ì—ëŸ¬ë¥¼ **í‘œì¤€ JSON í˜•ì‹**ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•œë‹¤.

##### âœ… í‘œì¤€ JSON êµ¬ì¡°

```json
{
  "type": "https://api.example.com/errors/invalid-parameter",
  "title": "Invalid Parameter",
  "status": 400,
  "detail": "The field 'email' is required.",
  "instance": "/api/v1/users"
}
```

| í•„ë“œ           | ì„¤ëª…                       |
| ------------ | ------------------------ |
| **type**     | ì—ëŸ¬ ìœ í˜•ì˜ ê³ ìœ  URL (ë¬¸ì„œ ë§í¬ ê°€ëŠ¥) |
| **title**    | ê°„ë‹¨í•œ ì—ëŸ¬ ìš”ì•½                |
| **status**   | HTTP ìƒíƒœ ì½”ë“œ               |
| **detail**   | êµ¬ì²´ì ì¸ ì›ì¸ ì„¤ëª…               |
| **instance** | ì—ëŸ¬ê°€ ë°œìƒí•œ ë¦¬ì†ŒìŠ¤ë‚˜ ê²½ë¡œ          |

---

#### 3. í”„ë ˆì„ì›Œí¬ë³„ ì „ì—­ ì—ëŸ¬ í‘œí˜„ ì˜ˆì‹œ

---

##### ğŸ FastAPI

```python
from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse

app = FastAPI()

@app.exception_handler(Exception)
async def global_exception_handler(request: Request, exc: Exception):
    return JSONResponse(
        status_code=500,
        content={
            "type": "about:blank",
            "title": "Internal Server Error",
            "status": 500,
            "detail": str(exc),
            "instance": str(request.url)
        }
    )
```

---

##### â˜• Spring Boot

```java
@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(CustomException.class)
    public ResponseEntity<Map<String, Object>> handleCustomException(CustomException e, HttpServletRequest req) {
        Map<String, Object> body = new HashMap<>();
        body.put("type", "https://api.example.com/errors/" + e.getCode());
        body.put("title", e.getMessage());
        body.put("status", e.getStatus());
        body.put("detail", e.getDetail());
        body.put("instance", req.getRequestURI());
        return new ResponseEntity<>(body, HttpStatus.valueOf(e.getStatus()));
    }
}
```

```java
public class CustomException extends RuntimeException {
    private final int status;
    private final String code;
    private final String detail;
    // getters, constructors
}
```

---

##### ğŸŸ¦ Express

```javascript
app.use((err, req, res, next) => {
  res.status(err.status || 500).json({
    type: "https://api.example.com/errors/" + (err.code || "internal"),
    title: err.name || "Server Error",
    status: err.status || 500,
    detail: err.message || "Unexpected server error occurred",
    instance: req.originalUrl
  });
});
```

---

##### ğŸ§± NestJS

```typescript
@Catch()
export class AllExceptionsFilter implements ExceptionFilter {
  catch(exception: any, host: ArgumentsHost) {
    const ctx = host.switchToHttp();
    const response = ctx.getResponse<Response>();
    const request = ctx.getRequest<Request>();

    const status = exception.getStatus ? exception.getStatus() : 500;
    const message = exception.message || 'Unexpected Error';

    response.status(status).json({
      type: `https://api.example.com/errors/${status}`,
      title: exception.name || 'Error',
      status,
      detail: message,
      instance: request.url,
    });
  }
}
```

---

#### 4. ì—ëŸ¬ ì½”ë“œ ì²´ê³„ ì„¤ê³„

| ë²”ì£¼         | ì˜ˆì‹œ ì½”ë“œ                                 | ì„¤ëª…                 |
| ---------- | ------------------------------------- | ------------------ |
| **ì¸ì¦ ê´€ë ¨**  | `AUTH_INVALID_TOKEN`, `AUTH_EXPIRED`  | í† í° ë¶ˆì¼ì¹˜ ë˜ëŠ” ë§Œë£Œ       |
| **ì…ë ¥ ê²€ì¦**  | `VALIDATION_ERROR`, `MISSING_FIELD`   | í•„ë“œ ëˆ„ë½, íƒ€ì… ë¶ˆì¼ì¹˜      |
| **ê¶Œí•œ ë¶€ì¡±**  | `FORBIDDEN`, `ROLE_NOT_ALLOWED`       | ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ           |
| **ë¦¬ì†ŒìŠ¤ ê´€ë ¨** | `NOT_FOUND`, `ALREADY_EXISTS`         | ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì¤‘ë³µ        |
| **ì„œë²„ ì˜¤ë¥˜**  | `INTERNAL_ERROR`, `DEPENDENCY_FAILED` | ë‚´ë¶€ ì²˜ë¦¬ ì‹¤íŒ¨, ì™¸ë¶€ ì—°ë™ ì‹¤íŒ¨ |

> ëª¨ë“  ì—ëŸ¬ ì½”ë“œëŠ” **ë¬¸ìì—´ ê¸°ë°˜ ìƒìˆ˜**ë¡œ ê´€ë¦¬í•˜ë©°,
> ì„œë²„ ë¡œê·¸ì—ì„œëŠ” `code` + `traceId` + `timestamp`ë¥¼ í•¨ê»˜ ë‚¨ê¸´ë‹¤.

---

#### 5. ì—ëŸ¬ íë¦„ (Flow)

```mermaid
sequenceDiagram
  participant C as Client
  participant API as Server
  participant L as Logger
  C->>API: Invalid Request
  API->>L: Log Error (code, detail, traceId)
  API-->>C: RFC7807 JSON Error
  C->>C: Display user-friendly message
```

---

#### 6. ì‘ë‹µ ë¹„êµ ì˜ˆì‹œ

| êµ¬ë¶„        | ë¹„í‘œì¤€ ë°©ì‹        | í‘œì¤€í™” ë°©ì‹ (RFC 7807)       |
| --------- | ------------- | ----------------------- |
| **í˜•íƒœ**    | ë¬¸ìì—´ `"Error"` | JSON êµ¬ì¡°í™”                |
| **í™•ì¥ì„±**   | ë‚®ìŒ            | type/title/detail í™•ì¥ ê°€ëŠ¥ |
| **ë¡œê·¸ ë§¤í•‘** | ì–´ë ¤ì›€           | code, traceId ê¸°ë°˜ ì¶”ì      |
| **UX ëŒ€ì‘** | ì–´ë ¤ì›€           | í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì„¸ë¶„í™” ê°€ëŠ¥   |

---

#### 7. ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ

1. **ê³µí†µ ì‘ë‹µ í¬ë§· ì •ì˜:**
   `success`, `data`, `error` êµ¬ì¡°ë¥¼ ëª¨ë“  API ì‘ë‹µì— ì ìš©
2. **RFC7807 ê¸°ë°˜ í‘œì¤€í™”:**
   `type`, `title`, `status`, `detail`, `instance` í•„ë“œ í¬í•¨
3. **ì¤‘ì•™ í•¸ë“¤ëŸ¬ êµ¬ì„±:**
   ê° í”„ë ˆì„ì›Œí¬ì˜ ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ê¸°ì—ì„œ ìë™ ë³€í™˜
4. **ì—ëŸ¬ ì½”ë“œ ì¼ê´€ì„± ìœ ì§€:**
   ê³µí†µ Enum / Constant íŒŒì¼ì—ì„œ ê´€ë¦¬
5. **ë¡œê¹… ì—°ë™:**
   traceId / errorCode / stackTraceë¥¼ JSON ë¡œê·¸ë¡œ ê¸°ë¡

---

