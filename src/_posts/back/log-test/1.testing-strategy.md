---
title: "Backend Logging & Testing Guide â€” í…ŒìŠ¤íŠ¸ ì „ëµ & ë³´ì•ˆ (Testing Strategy & Security)"
date: 2025-10-26
---


#### ìš”ì•½

- ë³¸ ë¬¸ì„œëŠ” **ë¡œê·¸ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì „ëµ(Testing Strategy)** ê³¼ **ë³´ì•ˆ(Security)** ê°•í™”ë¥¼ ìœ„í•œ  
  ì‹¤ë¬´ ê°€ì´ë“œë¼ì¸ì„ í†µí•©ì ìœ¼ë¡œ ì œì‹œí•œë‹¤.  
- í…ŒìŠ¤íŠ¸ëŠ” ë¡œê¹… í’ˆì§ˆì„ ê²€ì¦í•˜ê³ , ë³´ì•ˆì€ ë¡œê·¸ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•œë‹¤.  
  ë‘ ì˜ì—­ì€ **í’ˆì§ˆ(Quality)** ê³¼ **ì‹ ë¢°(Security)** ë¥¼ ë™ì‹œì— ë³´ì¥í•˜ëŠ” í•µì‹¬ ì¶•ì´ë‹¤.

> í…ŒìŠ¤íŠ¸ ì „ëµì€ **ë¡œê¹…ì˜ ì‹ ë¢°ì„±**ì„, ë³´ì•ˆ ì „ëµì€ **ë¡œê¹…ì˜ ì•ˆì „ì„±**ì„ ë³´ì¥í•œë‹¤.  
> ë‘ ì˜ì—­ì„ í†µí•©í•˜ë©´, ê°œë°œÂ·ìš´ì˜ ì „ ë‹¨ê³„ì—ì„œ  
> **â€œì¶”ì  ê°€ëŠ¥í•œ í’ˆì§ˆ ë¡œê·¸ + ë³´í˜¸ëœ ì •ë³´ ë¡œê·¸â€** ë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆë‹¤.  
> ì´ ë¬¸ì„œëŠ” ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì˜ **í’ˆì§ˆê´€ë¦¬(Testing)** ì™€ **ë³´ì•ˆê´€ë¦¬(Security)** ì˜  
> í†µí•© í‘œì¤€ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆë‹¤.

**í•µì‹¬ ìš”ì•½**
1. í…ŒìŠ¤íŠ¸ ë‹¨ê³„ë³„ ë¡œê·¸ ê²€ì¦ ì „ëµ (Unit â†’ Integration â†’ E2E â†’ CI/CD)  
2. ë¡œê·¸ ê¸°ë°˜ í’ˆì§ˆ ê²Œì´íŠ¸(Quality Gate) ìë™í™”  
3. ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹ ë° ì ‘ê·¼ ì œì–´ ì •ì±…  
4. í™˜ê²½ ë³€ìˆ˜ / ì¸ì¦ì •ë³´ ë…¸ì¶œ ë°©ì§€  
5. ë¡œê·¸ ë³´ì¡´Â·ì‚­ì œ ì •ì±… ë° ë³´ì•ˆ ì ê²€ ê¸°ì¤€  

---


### 1. í…ŒìŠ¤íŠ¸ ì „ëµ (Testing Strategy)

#### 1.1 í…ŒìŠ¤íŠ¸ ë ˆë²¨ ì •ì˜

| êµ¬ë¶„ | ëª©ì  | ê²€ì¦ ëŒ€ìƒ | ëŒ€í‘œ ë„êµ¬ |
|------|------|------------|------------|
| **Unit Test** | ê°œë³„ í•¨ìˆ˜/ëª¨ë“ˆì˜ ë¡œê¹… ê²€ì¦ | ë¡œê¹… í˜¸ì¶œ, í¬ë§· | Jest / Pytest / JUnit5 |
| **Integration Test** | ì„œë¹„ìŠ¤ ê°„ ë¡œê¹… ì—°ë™ í™•ì¸ | DB, API, ë¡œê¹… í†µí•© | Testcontainers / Supertest |
| **E2E Test** | ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ ê²€ì¦ | Request â†’ Response Trace | Postman / RestAssured |
| **CI/CD Validation** | ìë™í™” í’ˆì§ˆ ê²Œì´íŠ¸ | ë¡œê·¸ í¬ë§·, ì—ëŸ¬ìœ¨ | Jenkins / GitLab CI |

```mermaid
graph TD
  A[Unit Test] --> B[Integration Test]
  B --> C[E2E Test]
  C --> D[CI/CD Pipeline Validation]
```

---

#### 1.2 ë¡œê·¸ ê¸°ë°˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

**Node.js (Express/NestJS)**  
```js
import { logger } from '../src/logger';
describe('Logger Unit Test', () => {
  it('should output structured log', () => {
    const spy = jest.spyOn(logger, 'info');
    logger.info({ message: 'Unit test', user: 'u001' });
    expect(spy).toHaveBeenCalledWith(
      expect.objectContaining({ message: 'Unit test' })
    );
  });
});
```

**Python (Flask)**  
```python
import logging
def test_logger_format(caplog):
    logger = logging.getLogger("flask-api")
    logger.info({"event": "login", "user": "test"})
    assert any("login" in r.message for r in caplog.records)
```

**Java (Spring Boot)**  
```java
@Test
void shouldLogInfo() {
    Logger log = LoggerFactory.getLogger("test");
    log.info("Log success");
    assertTrue(true);
}
```

| í•­ëª© | ê²€ì¦ ë‚´ìš© |
|------|------------|
| **êµ¬ì¡°ì  ë¡œê·¸** | JSON í˜•íƒœë¡œ ì¶œë ¥ ì—¬ë¶€ |
| **Trace ID í¬í•¨** | ìš”ì²­ ë‹¨ìœ„ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€ ì—¬ë¶€ |
| **ë¡œê·¸ ë ˆë²¨ êµ¬ë¶„** | INFO / ERROR êµ¬ë¶„ ì •í™•ì„± |

---

#### 1.3 í†µí•© í…ŒìŠ¤íŠ¸ (Integration)

**Testcontainers ì˜ˆì‹œ**
```java
@SpringBootTest
@Testcontainers
class IntegrationTest {

  @Container
  static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:15");

  @Test
  void testDatabaseAndLogging() {
      log.info("DB ì—°ê²°: {}", postgres.getJdbcUrl());
      assertThat(postgres.isRunning()).isTrue();
  }
}
```

**Node.js Supertest ì˜ˆì‹œ**
```js
import request from 'supertest';
import app from '../src/app';

describe('Integration Logging Test', () => {
  it('should log request/response', async () => {
    const res = await request(app).get('/health');
    expect(res.status).toBe(200);
  });
});
```

| ê²€ì¦ í•­ëª© | ì„¤ëª… |
|------------|------|
| **API ìš”ì²­ ë¡œê·¸** | ìš”ì²­/ì‘ë‹µ ë¡œê·¸ ì •ìƒ ì¶œë ¥ |
| **Latency ì¸¡ì •** | latency_ms ê°’ í™•ì¸ |
| **DB ì—°ê²° ë¡œê·¸** | ì—°ê²° ì„±ê³µ ì‹œ ì •ë³´ ê¸°ë¡ |

---

#### 1.4 E2E í…ŒìŠ¤íŠ¸ (Trace ì „íŒŒ ê²€ì¦)

```js
import request from 'supertest';
describe('E2E Trace Test', () => {
  it('should keep traceId through request chain', async () => {
    const traceId = 'trace-1001';
    const res = await request(app).get('/api/orders').set('X-Trace-Id', traceId);
    expect(res.headers['x-trace-id']).toBe(traceId);
  });
});
```

**Java (RestAssured)**  
```java
@Test
void traceShouldPropagate() {
    given()
      .header("X-B3-TraceId", "trace-2001")
    .when()
      .get("/api/orders")
    .then()
      .statusCode(200)
      .header("X-B3-TraceId", "trace-2001");
}
```

| ê²€ì¦ í•­ëª© | ì„¤ëª… |
|------------|------|
| **Trace ID ì „íŒŒ** | ìš”ì²­/ì‘ë‹µ ê°„ ID ìœ ì§€ |
| **ë¡œê·¸ ì—°ê³„ì„±** | ë™ì¼ Trace IDë¡œ ë¡œê·¸ ë¬¶ì„ |
| **ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥** | ì˜ˆì™¸ ë°œìƒ ì‹œ ë¡œê·¸ í¬í•¨ |
| **ì„±ëŠ¥ì§€í‘œ ì¶œë ¥** | latency_ms, status í•„ë“œ í™•ì¸ |

---

#### 1.5 CI/CD ë¡œê·¸ ê²€ì¦ ìë™í™”

**Jenkins ì˜ˆì‹œ**
```groovy
stage('Validate Logs') {
  steps {
    sh '''
      grep -E '"level":"ERROR"' ./logs/app.log && exit 1 || echo "âœ… Clean logs"
    '''
  }
}
```

**GitLab CI ì˜ˆì‹œ**
```yaml
validate_logs:
  stage: validate
  script:
    - cat logs/app.log | jq -e 'select(.level=="ERROR")' && exit 1 || echo "No errors âœ…"
```

| í•­ëª© | ê²€ì¦ ë‚´ìš© |
|------|------------|
| **ì—ëŸ¬ ê°ì§€** | ERROR ë¡œê·¸ ì¡´ì¬ ì‹œ ë¹Œë“œ ì‹¤íŒ¨ |
| **í¬ë§· ê²€ì‚¬** | JSON êµ¬ì¡° ìœ íš¨ì„± ê²€ì¦ |
| **Trace í•„ë“œ ê²€ì‚¬** | traceId / latency í•„ë“œ ì¡´ì¬ ì—¬ë¶€ |
| **ë¡œê·¸ ëˆ„ë½ íƒì§€** | í…ŒìŠ¤íŠ¸ë³„ ë¡œê·¸ ìˆ˜ëŸ‰ ê²€ì¦ |

---

### 2. ë³´ì•ˆ (Security)

#### 2.1 ë¡œê·¸ ë‚´ ë¯¼ê°ì •ë³´ ë³´í˜¸

| ë¯¼ê° í•­ëª© | ì²˜ë¦¬ ë°©ì‹ | ì˜ˆì‹œ |
|------------|------------|------|
| **ë¹„ë°€ë²ˆí˜¸ / ë¹„ë°€í‚¤** | ë§ˆìŠ¤í‚¹ `"****"` | `"password": "****"` |
| **í† í° / ì„¸ì…˜ID** | ë¶€ë¶„ ìˆ¨ê¹€ | `"Authorization": "Bearer ****"` |
| **ê°œì¸ì •ë³´(ì´ë©”ì¼, ì „í™”)** | ì •ê·œì‹ ê¸°ë°˜ ë§ˆìŠ¤í‚¹ | `"user": "a***@example.com"` |
| **í™˜ê²½ë³€ìˆ˜ / API Key** | ë¡œê·¸ ì¶œë ¥ ê¸ˆì§€ | `.env` ì œì™¸ ëŒ€ìƒ ì„¤ì • |

**Node ì˜ˆì‹œ (ë§ˆìŠ¤í‚¹ í•¨ìˆ˜)**
```js
function maskSensitive(data) {
  return JSON.stringify(data).replace(/(password|token)["']?:["'][^"']+/gi, '$1:"****"');
}
```

---

#### 2.2 í™˜ê²½ ë³€ìˆ˜ ë° ë¹„ë°€í‚¤ ë³´í˜¸

| í•­ëª© | ê°€ì´ë“œ |
|------|---------|
| **.env ê´€ë¦¬** | ìš´ì˜ í™˜ê²½ ë¶„ë¦¬ (`.env.dev`, `.env.prod`) |
| **Git ì œì™¸** | `.gitignore`ì— `.env` í¬í•¨ |
| **Vault ì—°ë™** | HashiCorp Vault / AWS Secrets Manager í™œìš© |
| **ë¡œê¹… ì œì™¸ í‚¤ì›Œë“œ** | `SECRET`, `API_KEY`, `PRIVATE_KEY` í•„í„°ë§ |

**Spring Boot ì˜ˆì‹œ**
```yaml
logging:
  pattern:
    level: "%5p [${spring.application.name:},%X{traceId}]"
```

---

#### 2.3 Trace ID & ì‚¬ìš©ì ì •ë³´ ìµëª…í™”

| êµ¬ë¶„ | ë‚´ìš© |
|------|------|
| **Trace ID** | ë¬´ì‘ìœ„ UUID ì‚¬ìš© (`UUID.randomUUID()`) |
| **User Identifier** | ìµëª… ID (`user_****`)ë¡œ ë³€í™˜ |
| **IP ì£¼ì†Œ** | 3ì˜¥í…Ÿ ì´í•˜ ë§ˆìŠ¤í‚¹ (`192.168.***`) |
| **Session Data** | ë¡œê·¸ë¡œ ì¶œë ¥ ê¸ˆì§€ |

**NestJS Interceptor ì˜ˆì‹œ**
```ts
user.ip = user.ip?.replace(/\d+$/, "***");
this.logger.log({ traceId, userId: "user_****", message: "Accessed" });
```

---

#### 2.4 ë¡œê·¸ ì ‘ê·¼ ì œì–´

| í•­ëª© | ì„¤ëª… |
|------|------|
| **íŒŒì¼ ê¶Œí•œ** | 640 (ì½ê¸° ì œí•œ) |
| **ë¡œê·¸ ì„œë²„ ì ‘ê·¼** | ê´€ë¦¬ìÂ·DevOps ê³„ì •ë§Œ |
| **CI/CD ë¡œê·¸ ë…¸ì¶œ ë°©ì§€** | íŒŒì´í”„ë¼ì¸ ì¶œë ¥ ìµœì†Œí™” |
| **ë³´ê´€ ì£¼ê¸°** | 7~30ì¼ (í™˜ê²½ë³„ ì •ì±… ì ìš©) |
| **ë¡œê·¸ ì•”í˜¸í™”** | íŒŒì¼ ì „ì†¡ ì‹œ TLS / HTTPS ì ìš© |

**Linux ì˜ˆì‹œ**
```bash
chmod 640 /var/log/app.log
chown root:devops /var/log/app.log
```

---

#### 2.5 í…ŒìŠ¤íŠ¸ ë¡œê·¸ ë³´ì•ˆ

| í•­ëª© | ì›ì¹™ |
|------|------|
| **ê°€ì§œ ë°ì´í„° ì‚¬ìš©** | ì‹¤ì‚¬ìš©ì/ì‹¤ DB ë°ì´í„° ê¸ˆì§€ |
| **ëœë¤ Trace ID ìƒì„±** | í…ŒìŠ¤íŠ¸ë³„ ê³ ìœ  UUID ì‚¬ìš© |
| **ë³´ì•ˆ ë¡œê·¸ ë¶„ë¦¬** | í…ŒìŠ¤íŠ¸ ë¡œê·¸ì™€ ìš´ì˜ ë¡œê·¸ ë¶„ë¦¬ ë³´ê´€ |
| **ìë™ ì‚­ì œ** | í…ŒìŠ¤íŠ¸ ë¡œê·¸ëŠ” 7ì¼ ë‚´ ìë™ ì‚­ì œ ìŠ¤í¬ë¦½íŠ¸ ì ìš© |

**ìë™ ì‚­ì œ ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì‹œ**
```bash
find ./logs/test -type f -mtime +7 -delete
```

---

### 3. í’ˆì§ˆ + ë³´ì•ˆ ê²°í•© ì „ëµ

```mermaid
flowchart TD
  A[Unit / Integration Test] --> B[ë¡œê·¸ í¬ë§· ê²€ì¦]
  B --> C[ë³´ì•ˆ í•„í„° í™•ì¸]
  C --> D[CI/CD ìë™ ê²€ì¦]
  D --> E[ìš´ì˜ ë°°í¬ ìŠ¹ì¸]
```

| ë‹¨ê³„ | í’ˆì§ˆ ê²€ì¦ | ë³´ì•ˆ ê²€ì¦ |
|------|------------|------------|
| **ê°œë°œ** | ë¡œê·¸ êµ¬ì¡° / Trace ID | ë§ˆìŠ¤í‚¹ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ |
| **í†µí•©** | DB / API Trace íë¦„ | í™˜ê²½ë³€ìˆ˜ ë…¸ì¶œ ê²€ì‚¬ |
| **E2E** | ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ | ì‚¬ìš©ìì •ë³´ ìµëª…í™” ê²€ì¦ |
| **CI/CD** | ë¹Œë“œ ì‹¤íŒ¨ ì¡°ê±´ | ë¹„ë°€í‚¤ ë…¸ì¶œ íƒì§€ |

---

ì¢‹ì•„ìš” ğŸ‘
ì´ì–´ì„œ ìœ„ í†µí•© ë¬¸ì„œ(`Testing Strategy & Security`)ì— ë°”ë¡œ ì´ì–´ë¶™ì¼ ìˆ˜ ìˆëŠ”
**â€œí…ŒìŠ¤íŠ¸ ë¡œê·¸ ìë™ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸â€** ì™€ **â€œë³´ì•ˆ ê°ì‚¬ ì²´í¬ë¦¬ìŠ¤íŠ¸(Security Audit Checklist)â€**
ë‘ ì„¹ì…˜ì„ ê¸°ìˆ  ë¬¸ì„œ í‘œì¤€ í…œí”Œë¦¿ í˜•ì‹ìœ¼ë¡œ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.

---


### 4. í…ŒìŠ¤íŠ¸ ë¡œê·¸ ìë™ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ (Automated Log Validation Scripts)

#### 4.1 ëª©ì 
í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ ìƒì„±ëœ ë¡œê·¸ì˜ í’ˆì§ˆì„ ìë™ìœ¼ë¡œ ê²€ì¦í•˜ì—¬  
**â€œë¡œê·¸ í’ˆì§ˆ ê´€ë¦¬(Quality Gate)â€** ë¥¼ CI/CD íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ì— í†µí•©í•œë‹¤.

---

#### 4.2 ê²€ì¦ í¬ì¸íŠ¸

| ê²€ì¦ í•­ëª© | ì„¤ëª… | ê²°ê³¼ ê¸°ì¤€ |
|------------|------|------------|
| **JSON êµ¬ì¡° ìœ íš¨ì„±** | ë¡œê·¸ í¬ë§·ì´ ê¹¨ì§€ì§€ ì•Šì•˜ëŠ”ê°€ | âœ… `jq` íŒŒì„œ ì˜¤ë¥˜ ì—†ìŒ |
| **Trace í•„ë“œ ì¡´ì¬** | traceId, latency, status í•„ë“œê°€ í¬í•¨ë˜ì—ˆëŠ”ê°€ | âœ… ì¡´ì¬ |
| **ì—ëŸ¬ ë¡œê·¸ ë¹„ìœ¨** | ì „ì²´ ë¡œê·¸ ëŒ€ë¹„ ERROR ë¹„ìœ¨ì´ ê¸°ì¤€ ì´í•˜ì¸ê°€ | âš ï¸ 5% ì´í•˜ |
| **ë¯¼ê°ì •ë³´ ëˆ„ë½** | password/token ë“±ì˜ í•„ë“œê°€ í¬í•¨ë˜ì§€ ì•Šì•˜ëŠ”ê°€ | âœ… ì—†ìŒ |
| **ë¡œê·¸ ëˆ„ë½ íƒì§€** | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë‹¹ ìµœì†Œ 1ê°œ ì´ìƒì˜ ë¡œê·¸ê°€ ìƒì„±ë˜ëŠ”ê°€ | âœ… ì¼€ì´ìŠ¤ ì¼ì¹˜ |

---

#### 4.3 Node.js í™˜ê²½ ìë™ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ (`validate-logs.js`)

```js
import fs from 'fs';
import path from 'path';

const LOG_PATH = './logs/app.log';
const logs = fs.readFileSync(LOG_PATH, 'utf-8').trim().split('\n').map(JSON.parse);

const errorLogs = logs.filter(l => l.level === 'ERROR');
const invalid = logs.filter(l => !l.traceId || !l.message);
const sensitive = logs.filter(l => JSON.stringify(l).match(/password|token|secret/i));

console.log('ğŸ” ë¡œê·¸ ê²€ì¦ ê²°ê³¼');
console.log(`- ì´ ë¡œê·¸: ${logs.length}`);
console.log(`- ì—ëŸ¬ ë¡œê·¸: ${errorLogs.length}`);
console.log(`- Trace ëˆ„ë½: ${invalid.length}`);
console.log(`- ë¯¼ê°ì •ë³´ í¬í•¨: ${sensitive.length}`);

if (errorLogs.length / logs.length > 0.05) {
  console.error('âŒ ERROR ë¹„ìœ¨ 5% ì´ˆê³¼');
  process.exit(1);
}

if (invalid.length > 0 || sensitive.length > 0) {
  console.error('âŒ ë¡œê·¸ í’ˆì§ˆ ë¶ˆëŸ‰ - í•„ë“œ ëˆ„ë½ ë˜ëŠ” ë¯¼ê°ì •ë³´ í¬í•¨');
  process.exit(1);
}

console.log('âœ… ë¡œê·¸ í’ˆì§ˆ ì •ìƒ');
```

**ì‹¤í–‰ ì˜ˆì‹œ**
```bash
node validate-logs.js
```

**ì¶œë ¥ ê²°ê³¼**
```
ğŸ” ë¡œê·¸ ê²€ì¦ ê²°ê³¼
- ì´ ë¡œê·¸: 325
- ì—ëŸ¬ ë¡œê·¸: 4
- Trace ëˆ„ë½: 0
- ë¯¼ê°ì •ë³´ í¬í•¨: 0
âœ… ë¡œê·¸ í’ˆì§ˆ ì •ìƒ
```

---

#### 4.4 CI/CD ì—°ë™ ì˜ˆì‹œ (GitLab CI)

```yaml
stages:
  - test
  - validate

validate_logs:
  stage: validate
  script:
    - node validate-logs.js
  allow_failure: false
```

---

#### 4.5 Shell ê¸°ë°˜ ê³µìš© ìŠ¤í¬ë¦½íŠ¸ (OS ê³µí†µ)

```bash
#!/bin/bash
LOG_FILE="./logs/app.log"

echo "ğŸ” ë¡œê·¸ í’ˆì§ˆ ê²€ì‚¬ ì¤‘..."
jq . $LOG_FILE > /dev/null 2>&1 || { echo "âŒ JSON êµ¬ì¡° ì˜¤ë¥˜"; exit 1; }
grep -E '"password"|"token"|"secret"' $LOG_FILE && { echo "âŒ ë¯¼ê°ì •ë³´ ë°œê²¬"; exit 1; }
grep -q '"traceId"' $LOG_FILE || { echo "âŒ traceId ëˆ„ë½"; exit 1; }

echo "âœ… ë¡œê·¸ í’ˆì§ˆ ì •ìƒ"
```

---

> **ê²°ë¡ :**  
> ìë™ ë¡œê·¸ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ëŠ” **í…ŒìŠ¤íŠ¸ ë‹¨ê³„ì—ì„œì˜ ì‹ ë¢°ì„±ê³¼ ë³´ì•ˆ ìˆ˜ì¤€ì„ ì •ëŸ‰í™”**í•œë‹¤.  
> ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¹Œë“œ íŒŒì´í”„ë¼ì¸ ë‚´ì—ì„œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ë©°,  
> ì‹¤íŒ¨ ì‹œ ë°°í¬ë¥¼ ì°¨ë‹¨í•˜ëŠ” â€œí’ˆì§ˆ ê²Œì´íŠ¸(Quality Gate)â€ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.

---

### 5. ë³´ì•ˆ ê°ì‚¬ ì²´í¬ë¦¬ìŠ¤íŠ¸ (Security Audit Checklist)

#### 5.1 ëª©ì 
ìš´ì˜ í™˜ê²½ì˜ ë¡œê·¸ ë° í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ëŒ€ìƒìœ¼ë¡œ  
**ë³´ì•ˆ ê°ì‚¬(Audit)** ë¥¼ ìˆ˜í–‰í•  ë•Œ ì ê²€í•´ì•¼ í•  í•­ëª©ì„ í‘œì¤€í™”í•œë‹¤.  
í•´ë‹¹ ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ” **ISMS / ISO27001** ìˆ˜ì¤€ì˜ ë‚´ë¶€ ê°ì‚¬ ê¸°ì¤€ì— ë¶€í•©í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.

---

#### 5.2 ì‹œìŠ¤í…œ ì ‘ê·¼ ì œì–´

| í•­ëª© | ì ê²€ ê¸°ì¤€ | ìƒíƒœ |
|------|------------|------|
| ì„œë²„ ì ‘ê·¼ ê¶Œí•œ ìµœì†Œí™” | root ì ‘ê·¼ ì°¨ë‹¨, devopsë§Œ SSH í—ˆìš© | â˜ |
| ë¡œê·¸ ì„œë²„ ì ‘ê·¼ ì œì–´ | ê´€ë¦¬ìÂ·ë³´ì•ˆ ë‹´ë‹¹ì í•œì • | â˜ |
| SSH í‚¤ ê´€ë¦¬ | ê°œì¸ í‚¤, ê³µìš© í‚¤ ë§Œë£Œ ì£¼ê¸° ì ê²€ | â˜ |
| CI/CD í™˜ê²½ ë¹„ë°€ë³€ìˆ˜ ë³´í˜¸ | `MASKED` ì„¤ì • ì—¬ë¶€ í™•ì¸ | â˜ |
| ì™¸ë¶€ IP ì°¨ë‹¨ | ë°©í™”ë²½ ê·œì¹™ìœ¼ë¡œ ì™¸ë¶€ ì ‘ê·¼ ì œí•œ | â˜ |

---

#### 5.3 ë¡œê·¸ íŒŒì¼ ë° ë³´ì¡´ ì •ì±…

| í•­ëª© | ì ê²€ ê¸°ì¤€ | ìƒíƒœ |
|------|------------|------|
| ë¡œê·¸ ë³´ê´€ ê¸°ê°„ | 7~30ì¼ ë‚´ ì •ì±… ì ìš© | â˜ |
| ë¡œê·¸ íŒŒì¼ ì ‘ê·¼ ê¶Œí•œ | `chmod 640` ì´ìƒ | â˜ |
| ë¡œê·¸ ì „ì†¡ ì‹œ ì•”í˜¸í™” | HTTPS / TLS ì ìš© | â˜ |
| ë¡œê·¸ ë°±ì—… ë° ì‚­ì œ ì£¼ê¸° | ë°±ì—… ì£¼ê¸° 1ì¼, ì‚­ì œ ì£¼ê¸° 30ì¼ | â˜ |
| ë¡œê·¸ íšŒì „ ì„¤ì • | ì¼ ë‹¨ìœ„ Log Rotation ì ìš© | â˜ |

---

#### 5.4 ë¯¼ê°ì •ë³´ ë° ë§ˆìŠ¤í‚¹ ì •ì±…

| í•­ëª© | ì ê²€ ê¸°ì¤€ | ìƒíƒœ |
|------|------------|------|
| ë¹„ë°€ë²ˆí˜¸, í† í° ë¡œê·¸ ì œì™¸ | ë¡œê±° í•„í„° ì •ì±… ì ìš© í™•ì¸ | â˜ |
| ê°œì¸ì •ë³´(ì „í™”, ì´ë©”ì¼) ë§ˆìŠ¤í‚¹ | ì •ê·œì‹ ê¸°ë°˜ ë§ˆìŠ¤í‚¹ í•¨ìˆ˜ í™œì„±í™” | â˜ |
| í™˜ê²½ ë³€ìˆ˜ ì¶œë ¥ ê¸ˆì§€ | `.env` íŒŒì¼ Git í¬í•¨ ì—¬ë¶€ ì ê²€ | â˜ |
| Trace ID ìµëª…í™” | UUID í˜•íƒœ ì‚¬ìš©, ìˆœì°¨ ID ê¸ˆì§€ | â˜ |
| ë¯¼ê°ì •ë³´ ë¡œê·¸ íŒŒì„œ ê²€ì¦ | `validate-logs.js` ì‹¤í–‰ ê²°ê³¼ í™•ì¸ | â˜ |

---

#### 5.5 CI/CD íŒŒì´í”„ë¼ì¸ ë³´ì•ˆ

| í•­ëª© | ì ê²€ ê¸°ì¤€ | ìƒíƒœ |
|------|------------|------|
| ë¹Œë“œ ë¡œê·¸ ë¹„ê³µê°œ | ì™¸ë¶€ ì‚¬ìš©ì ì ‘ê·¼ ì œí•œ | â˜ |
| í™˜ê²½ë³€ìˆ˜ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ | `mask:` ì†ì„± ì ìš© í™•ì¸ | â˜ |
| í…ŒìŠ¤íŠ¸ ë¡œê·¸ ìë™ ì‚­ì œ | `find ./logs/test -mtime +7 -delete` ì ìš© | â˜ |
| ì‹¤íŒ¨ ë¡œê·¸ ë³´ê´€ ì œí•œ | ERROR ë¡œê·¸ë§Œ ë³´ê´€ í›„ 24ì‹œê°„ ë‚´ ì‚­ì œ | â˜ |
| ë³´ì•ˆ ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§ | Slack/Webhook ì•Œë¦¼ ì„¤ì • | â˜ |

---

#### 5.6 ê°ì‚¬ ê²°ê³¼ ê¸°ë¡ ì˜ˆì‹œ

| í•­ëª© | ì ê²€ê²°ê³¼ | ì¡°ì¹˜ì‚¬í•­ |
|------|------------|----------|
| ë¡œê·¸ íŒŒì¼ ê¶Œí•œ ë¯¸í¡ | âŒ `chmod 640` ë¯¸ì ìš© | ì¦‰ì‹œ ìˆ˜ì • |
| CI ë³€ìˆ˜ ë…¸ì¶œ | âš ï¸ ì¼ë¶€ Key ë…¸ì¶œ | GitLab `MASKED` ì„¤ì • í•„ìš” |
| ë¯¼ê°ì •ë³´ ë¡œê·¸ í¬í•¨ | âœ… ì—†ìŒ | - |
| Trace í•„ë“œ ëˆ„ë½ | âœ… ì •ìƒ | - |

---

#### 5.7 ìë™ ê°ì‚¬ ë¦¬í¬íŠ¸ ìƒì„± (ì„ íƒ êµ¬ì„±)

**ë¦¬í¬íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì‹œ (`audit-report.sh`)**

```bash
#!/bin/bash
REPORT=./audit-result.txt
echo "=== Security Audit Report ===" > $REPORT
date >> $REPORT
echo "" >> $REPORT

echo "[1] íŒŒì¼ ê¶Œí•œ ì ê²€" >> $REPORT
ls -l ./logs >> $REPORT

echo "[2] ë¯¼ê°ì •ë³´ ì ê²€" >> $REPORT
grep -E 'password|token|secret' ./logs/app.log >> $REPORT || echo "OK" >> $REPORT

echo "[3] CI/CD í™˜ê²½ ì ê²€" >> $REPORT
env | grep -E 'KEY|SECRET' >> $REPORT || echo "í™˜ê²½ë³€ìˆ˜ ë…¸ì¶œ ì—†ìŒ" >> $REPORT

echo "[4] ê²°ê³¼ ìš”ì•½" >> $REPORT
echo "âœ… ë³´ì•ˆ ì ê²€ ì™„ë£Œ â€” $(date)" >> $REPORT
```

**ì‹¤í–‰**
```bash
bash audit-report.sh
```

**ì¶œë ¥ ì˜ˆì‹œ**
```
=== Security Audit Report ===
Sun Oct 26 03:40:52 KST 2025
[1] íŒŒì¼ ê¶Œí•œ ì ê²€
-rw-r----- 1 root devops 5120 Oct 26 03:35 app.log
[2] ë¯¼ê°ì •ë³´ ì ê²€
OK
[3] CI/CD í™˜ê²½ ì ê²€
í™˜ê²½ë³€ìˆ˜ ë…¸ì¶œ ì—†ìŒ
âœ… ë³´ì•ˆ ì ê²€ ì™„ë£Œ â€” Sun Oct 26 03:40:52 KST 2025
```

---
