---
title: "Guard / Interceptor 기반 접근제어"
date: 2025-10-25
---

**version: NestJS v10.x 기준**

---

#### 요약

Guard와 Interceptor는 **요청 단위의 인증·인가 필터** 역할을 수행한다.  
Guard는 접근 여부를 결정하고, Interceptor는 요청/응답을 가공한다.

Guard는 **인증**, Interceptor는 **로깅/가공**, Filter는 **에러 처리**를 담당한다.
이 세 가지를 조합하면 **완전한 요청 처리 파이프라인**을 구성할 수 있다.

> *“보안은 체크포인트, 성능은 인터셉터에서 시작된다.”*

---

##### 참고자료
- [NestJS Guards](https://docs.nestjs.com/guards)
- [NestJS Interceptors](https://docs.nestjs.com/interceptors)

---

#### 1. Guard — 접근 권한 제어

```ts
@Injectable()
export class JwtAuthGuard extends AuthGuard('jwt') {}
```

`controller.ts`

```ts
@UseGuards(JwtAuthGuard)
@Get('profile')
getProfile(@Req() req) {
  return req.user;
}
```

> Guard는 `canActivate()`를 통해 요청의 접근 여부를 결정한다.

---

#### 2. Interceptor — 요청/응답 가공

```ts
@Injectable()
export class LoggingInterceptor implements NestInterceptor {
  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    console.log('Before...');
    return next.handle().pipe(tap(() => console.log('After...')));
  }
}
```

---

#### 3. Exception Filter와의 관계

| 구성요소             | 역할       | 실행 시점         |
| ---------------- | -------- | ------------- |
| Guard            | 접근 여부 결정 | Controller 이전 |
| Interceptor      | 요청/응답 수정 | Controller 전후 |
| Exception Filter | 에러 처리    | 예외 발생 시       |

---
