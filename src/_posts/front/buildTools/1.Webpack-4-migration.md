---
title: "Webpack 4에서 5으로 마이그레이션"
date: 2025-10-16
---

# 핵심 변경점 요약 (v5)

1. **최소 요구 버전 상향**

* Node.js **≥ 18.12.0**, webpack **≥ 5.0.0**, webpack-cli **≥ 4.7.0** 필요. ([webpack][1])

2. **옵션 구조 변화 & 정리**

* TLS/HTTPS 설정이 상위 레벨(`devServer.https`, `key`, `cert` 등)에서
  **`devServer.server` 블록**으로 이동/정규화.

  ```diff
  - devServer: { https: true, key: './key.pem', cert: './cert.pem' }
  + devServer: {
  +   server: { type: 'https',
  +     options: { key: './key.pem', cert: './cert.pem' } }
  + }
  ```

  공식 문서 샘플 구조 참고. ([webpack][1])

* 미들웨어 훅: v4에서 쓰던 `onBeforeSetupMiddleware`/`onAfterSetupMiddleware` 대신
  **`setupMiddlewares(middlewares, devServer)`** 사용. (v4.7+ 도입, v5 권장) ([webpack][1])

* dev-server 문서가 v5 기준으로 전면 업데이트: 옵션 의미/CLI 사용 방식 재확인 필요. ([webpack][1])

3. **패키지 최신화**

* `webpack-dev-server@^5` 최신 라인 사용 권장(예: 5.2.x). 버전/배포 이력은 npm에서 확인. ([NPM][2])

---

# 단계별 마이그레이션 절차

## 1. 의존성 업그레이드

```bash
# 핵심 업그레이드
npm i -D webpack@^5 webpack-cli@^5 webpack-dev-server@^5

# (권장) 로더/플러그인도 최신으로 동기화
# 예) ts-loader, css-loader, style-loader, sass-loader, html-webpack-plugin 등
```

* 업그레이드 후 **Node 18.12+** 환경에서 동작 확인. ([webpack][1])

## 2. 설정 파일 수정 포인트

### (A) HTTPS/TLS

```diff
- devServer: { https: true, key: './server.key', cert: './server.crt' }
+ const fs = require('fs'); const path = require('path');
+ devServer: {
+   server: { type: 'https', options: {
+     key: fs.readFileSync(path.join(__dirname, './server.key')),
+     cert: fs.readFileSync(path.join(__dirname, './server.crt')),
+     // 필요한 경우 pfx/ca/passphrase 등 추가
+   } }
+ }
```

공식 문서의 `server.type`/`server.options` 형태로 맞추기. ([webpack][1])

### (B) 미들웨어 훅

```diff
- devServer: {
-   onBeforeSetupMiddleware(devServer) { /* ... */ },
-   onAfterSetupMiddleware(devServer) { /* ... */ },
- }
+ devServer: {
+   setupMiddlewares: (middlewares, devServer) => {
+     if (!devServer) throw new Error('wds not defined');
+     // 예: 헬스체크 라우트
+     devServer.app.get('/healthz', (_req, res) => res.send('ok'));
+     return middlewares;
+   }
+ }
```

v5에서는 `setupMiddlewares`로 통합. ([webpack][1])

### (C) 기본 옵션 재점검

* `devServer.static`, `historyApiFallback`, `hot`, `client`(overlay/webSocketURL) 등은 v5 문서 기준으로 유지/조정. ([webpack][1])

## 3. 스크립트 정리

```json
{
  "scripts": {
    "start": "webpack serve --config webpack.dev.js --mode development",
    "build": "webpack --config webpack.prod.js --mode production"
  }
}
```

CLI 호출은 그대로 `webpack serve`. v5 문서 기준. ([webpack][1])

## 4. 동작 확인 체크리스트

* 콘솔에 **Node/webpack/cli 요구사항** 경고가 없는지. ([webpack][1])
* HTTPS로 기동 시 인증서가 정상 반영되는지(문서의 `server.options` 예시대로). ([webpack][1])
* 커스텀 미들웨어가 `setupMiddlewares`로 정상 동작하는지. ([webpack][1])

---

# 참고 링크

* **DevServer(v5) 공식 문서/옵션**: v5 요구사항·옵션 전부 최신 반영. ([webpack][1])
* **v5 마이그레이션 노트(GitHub)**: 브레이킹 체인지 요약(노드/웹팩/CLI 최소 버전 등). ([GitHub][3])
* **npm 패키지 페이지**(최신 버전 확인): webpack-dev-server 5.x 릴리스 현황. ([NPM][2])

---

[1]: https://webpack.js.org/configuration/dev-server/ "DevServer | webpack"
[2]: https://www.npmjs.com/package/webpack-dev-server?utm_source=chatgpt.com "webpack-dev-server - NPM"
[3]: https://github.com/webpack/webpack-dev-server/blob/master/migration-v5.md "webpack-dev-server/migration-v5.md at main · webpack/webpack-dev-server · GitHub"
