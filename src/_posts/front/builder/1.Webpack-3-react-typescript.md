---
title: "Webpack react typescript"
date: 2025-10-16
---

# react-typescript
---

## 주요 패키지 및 버전

| 구분         | 패키지명                     | 버전      | 설명                 |
| ---------- | ------------------------ | ------- | ------------------ |
| Core       | **webpack**              | ^5.93.0 | 모듈 번들러 핵심          |
|            | **webpack-cli**          | ^5.1.4  | CLI 실행 도구          |
|            | **webpack-dev-server**   | ^4.15.2 | 개발용 Hot Reload 서버  |
|            | **webpack-merge**        | ^6.0.1  | 설정 파일 병합 도구        |
| Loader     | **ts-loader**            | ^9.5.1  | TypeScript → JS 변환 |
|            | **css-loader**           | ^7.1.2  | CSS import 처리      |
|            | **style-loader**         | ^4.0.0  | CSS를 `<style>`로 주입 |
|            | **sass-loader**          | ^14.2.1 | SCSS 변환용 로더        |
|            | **sass**                 | ^1.77.8 | Sass 컴파일러          |
| Plugin     | **html-webpack-plugin**  | ^5.6.0  | HTML 자동 생성         |
|            | **copy-webpack-plugin**  | ^12.0.2 | 정적 파일 복사           |
|            | **clean-webpack-plugin** | ^4.0.0  | 빌드 전 파일 정리         |
|            | **dotenv-webpack**       | ^8.1.0  | 환경 변수 주입           |
| React      | **react**                | ^18.3.3 | React Core         |
|            | **react-dom**            | ^18.3.3 | React DOM          |
| TypeScript | **typescript**           | ^5.6.3  | TS 컴파일러            |
| 기타         | **@types/react**         | ^18.3.3 | React 타입 정의        |
|            | **@types/react-dom**     | ^18.3.3 | React DOM 타입 정의    |


---

## 📁 폴더 구조 예시

```
your-project/
├─ env/
│  ├─ env_local
│  ├─ env_dev
│  └─ env_prod
├─ public/
│  └─ index.html
├─ src/
│  ├─ App.tsx
│  └─ index.tsx
├─ tsconfig.json
├─ package.json
├─ webpack.common.js
├─ webpack.dev.js
└─ webpack.prod.js
```

---

## 1) `webpack.common.js` (공통 설정)

```js
// webpack.common.js
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
  // 앱 진입점
  entry: path.resolve(__dirname, 'src/index.tsx'),

  // 공통 출력 설정 (파일명 세부는 dev/prod에서 보정)
  output: {
    path: path.resolve(__dirname, 'dist'),
    publicPath: '/', // SPA 라우팅을 위해 루트 기준
    assetModuleFilename: 'assets/[name][hash][ext][query]',
  },

  // ts/tsx import 시 확장자 생략
  resolve: {
    extensions: ['.tsx', '.ts', '.js'],
  },

  module: {
    rules: [
      // TypeScript 컴파일
      {
        test: /\.[jt]sx?$/,
        exclude: /node_modules/,
        use: [
          {
            loader: 'ts-loader', // Babel 대신 ts-loader 사용 (요청 사양 반영)
            options: {
              transpileOnly: true, // 빌드 속도 향상 (타입체크는 별도 tsserver가 담당)
            },
          },
        ],
      },

      // CSS / SCSS
      {
        test: /\.(css|scss)$/,
        use: [
          'style-loader', // <style> 주입
          {
            loader: 'css-loader',
            options: { importLoaders: 1, modules: false },
          },
          // 필요 시 주석 해제하여 SCSS 사용
          // 'sass-loader',
        ],
      },

      // 이미지/폰트 등 정적 리소스
      {
        test: /\.(png|jpg|jpeg|gif|webp|ico|bmp|svg|eot|ttf|woff2?)$/,
        type: 'asset/resource',
      },
    ],
  },

  plugins: [
    new HtmlWebpackPlugin({
      template: path.resolve(__dirname, 'public/index.html'),
      // favicon: path.resolve(__dirname, 'public/favicon.ico'),
    }),
  ],
};
```

---

## 2) `webpack.dev.js` (개발용 설정)

```js
// webpack.dev.js
const path = require('path');
const { merge } = require('webpack-merge');
const Dotenv = require('dotenv-webpack');
const common = require('./webpack.common');

module.exports = merge(common, {
  mode: 'development',
  devtool: 'eval-cheap-module-source-map',

  output: {
    filename: 'js/[name].js',
    chunkFilename: 'js/[name].chunk.js',
  },

  devServer: {
    port: 5173,
    open: true,
    hot: true,
    historyApiFallback: true,       // SPA 라우팅 지원
    static: {
      directory: path.resolve(__dirname, 'public'),
      watch: true,
    },
  },

  plugins: [
    // 로컬/개발 환경 변수 주입 (env_local 우선, 없으면 env_dev 사용 등 자유롭게)
    new Dotenv({
      path: './env/env_local', // 개발 PC 로컬용
      allowEmptyValues: true,
      systemvars: true,
    }),
  ],

  optimization: {
    runtimeChunk: 'single',
    splitChunks: {
      chunks: 'all',
    },
  },
});
```

---

## 3) `webpack.prod.js` (운영/배포용 설정)

```js
// webpack.prod.js
const path = require('path');
const { merge } = require('webpack-merge');
const Dotenv = require('dotenv-webpack');
const CopyWebpackPlugin = require('copy-webpack-plugin');
const common = require('./webpack.common');

module.exports = merge(common, {
  mode: 'production',
  devtool: 'source-map',

  output: {
    path: path.resolve(__dirname, 'dist'),
    clean: true, // dist 정리 (clean-webpack-plugin 대체 가능)
    filename: 'js/[name].[contenthash:8].js',
    chunkFilename: 'js/[name].[contenthash:8].chunk.js',
  },

  plugins: [
    // 운영 환경 변수
    new Dotenv({
      path: './env/env_prod',
      allowEmptyValues: true,
      systemvars: true,
    }),

    // public 정적 파일 복사 (index.html은 HtmlWebpackPlugin이 처리하므로 제외)
    new CopyWebpackPlugin({
      patterns: [
        {
          from: path.resolve(__dirname, 'public'),
          to: path.resolve(__dirname, 'dist'),
          globOptions: { ignore: ['**/index.html'] },
        },
      ],
    }),
  ],

  optimization: {
    // 코드 스플리팅/캐싱 최적화
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        // vendor 청크 분리 예시
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          priority: -10,
          reuseExistingChunk: true,
        },
      },
    },
    runtimeChunk: 'single',
  },
});
```

---

## 4) `tsconfig.json` (TypeScript 설정)

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["DOM", "ES2020"],
    "module": "ESNext",
    "moduleResolution": "Node",
    "jsx": "react-jsx",
    "sourceMap": true,
    "strict": true,
    "skipLibCheck": true,
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "baseUrl": "./src",
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["src"]
}
```

---

## 5) `public/index.html` (템플릿 예시)

```html
<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>React + TypeScript + Webpack</title>
  </head>
  <body>
    <div id="root"></div>
    <!-- 번들은 HtmlWebpackPlugin이 자동 삽입 -->
  </body>
</html>
```

---

## 6) 간단한 `src` 예시

```tsx
// src/App.tsx
import React from 'react';

export default function App() {
  return (
    <main style={{ padding: 24 }}>
      <h1>Hello, Webpack + React + TS</h1>
      <p>API_URL: {process.env.API_URL}</p>
    </main>
  );
}
```

```tsx
// src/index.tsx
import React from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';

const root = createRoot(document.getElementById('root')!);
root.render(<App />);
```

---

## 7) ENV 파일 샘플

```
# env/env_local
API_URL=http://localhost:3000
MODE=local
```

```
# env/env_dev
API_URL=https://dev-api.example.com
MODE=development
```

```
# env/env_prod
API_URL=https://api.example.com
MODE=production
```

> 주입된 변수는 `process.env.API_URL` 형태로 코드에서 접근합니다.
> **주의:** 클라이언트 번들에 주입되므로 “노출되어도 되는 값”만 넣으세요.

---

## 8) `package.json` 스크립트 예시

```json
{
  "scripts": {
    "start": "webpack serve --config webpack.dev.js --mode development",
    "build": "webpack --config webpack.prod.js --mode production",
    "build:dev": "webpack --config webpack.dev.js --mode development",
    "analyze": "WEBPACK_BUNDLE=true webpack --config webpack.prod.js --mode production"
  }
}
```

---

## 🔎 선택 옵션 (필요 시)

* **SCSS 사용**: `sass` 패키지 설치 후 `sass-loader` 주석 해제

  ```bash
  npm i -D sass sass-loader
  ```
* **이미지 최적화**: `image-minimizer-webpack-plugin` 추가
* **React Fast Refresh**(개발속도↑): `@pmmmwh/react-refresh-webpack-plugin` 도입

---
