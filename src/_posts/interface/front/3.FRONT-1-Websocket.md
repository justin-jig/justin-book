---
title: "websocket"
date: 2025-10-16
---

### ë‹¤ìŒì€ **Socket í†µì‹ ê³¼ WebSocket**ì„ í•œëˆˆì— ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.
(ê¸°ì´ˆ ê°œë… â†’ ë™ì‘ ì›ë¦¬ â†’ ë¹„êµ â†’ ì‹¤ìŠµ ì˜ˆì œ ìˆœì„œë¡œ êµ¬ì„±ë¨)

## âœ… ìš”ì•½

| êµ¬ë¶„     | Socket            | WebSocket                  |
| ------ | ----------------- | -------------------------- |
| ê³„ì¸µ     | ì „ì†¡ ê³„ì¸µ (TCP/UDP)   | ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ                  |
| ì—°ê²° ë°©ì‹  | TCP/UDP ê¸°ë°˜        | HTTP ê¸°ë°˜ (Upgradeë¡œ ì „í™˜)      |
| í†µì‹  í˜•íƒœ  | 1:1 í†µì‹  ì¤‘ì‹¬         | ì–‘ë°©í–¥ ì‹¤ì‹œê°„ í†µì‹                  |
| íŠ¹ì§•     | ì‹ ë¢°ì„±(TCP), ì†ë„(UDP) | ì§€ì† ì—°ê²°, ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹            |
| ì£¼ìš” ì‚¬ìš©ì²˜ | íŒŒì¼ì „ì†¡, ìŠ¤íŠ¸ë¦¬ë°, IoT   | ì±„íŒ…, ì•Œë¦¼, ê²Œì„, ì£¼ì‹ì‹œì„¸, ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ |

---


# Socket í†µì‹  & WebSocket ì •ë¦¬

## 1. Socket í†µì‹  ê°œìš”

**ì†Œì¼“(Socket)** ì€ ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ **ë‘ í”„ë¡œê·¸ë¨ ê°„ì˜ ì–‘ë°©í–¥ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê¸°ìˆ **ì´ë‹¤.
í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ **IP ì£¼ì†Œ + í¬íŠ¸ ë²ˆí˜¸**ë¥¼ í†µí•´ ì—°ê²°ë˜ì–´, **ì‹¤ì‹œê°„ ë°ì´í„° ì†¡ìˆ˜ì‹ **ì„ ìˆ˜í–‰í•œë‹¤.


### ğŸ”¹ ì£¼ìš” íŠ¹ì§•

* ì–‘ë°©í–¥ í†µì‹  (Full Duplex)
* IPì™€ Portë¥¼ ê²°í•©í•œ ìœ ì¼í•œ ì‹ë³„ì ì‚¬ìš©
* TCP / UDP ê¸°ë°˜ì˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ 
* ì—°ê²°ì´ ìœ ì§€ë˜ëŠ” ë™ì•ˆ ì§€ì†ì ì¸ ë°ì´í„° êµí™˜ ê°€ëŠ¥

| êµ¬ë¶„       | ì„¤ëª…                             |
| -------- | ------------------------------ |
| **IP**   | ë„¤íŠ¸ì›Œí¬ ìƒì˜ ì¥ì¹˜ë¥¼ ì‹ë³„í•˜ëŠ” ê³ ìœ  ì£¼ì†Œ         |
| **PORT** | í•œ ì¥ì¹˜ ë‚´ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë¶„í•˜ëŠ” ë²ˆí˜¸ |

#### í¬íŠ¸ ë²ˆí˜¸ êµ¬ë¶„

| êµ¬ë¶„       | ë²”ìœ„          | ì˜ˆì‹œ                                     |
| -------- | ----------- | -------------------------------------- |
| ì˜ ì•Œë ¤ì§„ í¬íŠ¸ | 0~1023      | HTTP(80), HTTPS(443), SSH(22), FTP(21) |
| ë“±ë¡ëœ í¬íŠ¸   | 1024~49151  | íŠ¹ì • ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ìš©                           |
| ë™ì /ì‚¬ì„¤ í¬íŠ¸ | 49152~65535 | ì„ì‹œ í¬íŠ¸ (ì£¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì‚¬ìš©)                  |

---

## 2. Socketì˜ ì¢…ë¥˜

| ì¢…ë¥˜                       | ì„¤ëª…                      | ì‚¬ìš© ì‚¬ë¡€            |
| ------------------------ | ----------------------- | ---------------- |
| **TCP(Socket Stream)**   | ì—°ê²° ì§€í–¥, ì‹ ë¢°ì„± ë³´ì¥, ìˆœì„œ ë³´ì¥    | HTTP, ì´ë©”ì¼, íŒŒì¼ ì „ì†¡ |
| **UDP(Datagram Socket)** | ë¹„ì—°ê²°í˜•, ì†ì‹¤ ê°€ëŠ¥, ìˆœì„œ ë¯¸ë³´ì¥, ë¹ ë¦„ | ìŠ¤íŠ¸ë¦¬ë°, ê²Œì„, VoIP   |

| ë¹„êµ í•­ëª© | TCP       | UDP          |
| ----- | --------- | ------------ |
| ì—°ê²° ë°©ì‹ | ì—°ê²° ì§€í–¥í˜•    | ë¹„ì—°ê²°í˜•         |
| ì‹ ë¢°ì„±   | ë†’ìŒ        | ë‚®ìŒ           |
| ìˆœì„œ ë³´ì¥ | ìˆìŒ        | ì—†ìŒ           |
| ì†ë„    | ëŠë¦¼        | ë¹ ë¦„           |
| ëŒ€í‘œ ì‚¬ë¡€ | HTTP, FTP | ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°, ê²Œì„ |

---

## 3. Socket í†µì‹  ë™ì‘ ì›ë¦¬

![alt text](/justin-book/images/front/1websocket.png)

1. **ì†Œì¼“ ìƒì„± (`socket()`)**
   â†’ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì˜ ì¢…ë‹¨ì  ìƒì„±

2. **ë°”ì¸ë”© (`bind()`)**
   â†’ ì„œë²„ ì†Œì¼“ì„ íŠ¹ì • IP/í¬íŠ¸ì— ì—°ê²°

3. **ëŒ€ê¸° (`listen()`)**
   â†’ í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦¼

4. **ì—°ê²° ìˆ˜ë½ (`accept()`)**
   â†’ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°›ì•„ ìƒˆë¡œìš´ ì†Œì¼“ ìƒì„±

5. **ì—°ê²° ìš”ì²­ (`connect()`)**
   â†’ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ì—°ê²° ìš”ì²­

6. **ë°ì´í„° ì†¡ìˆ˜ì‹  (`send()`, `recv()`)**
   â†’ ì—°ê²°ëœ ì†Œì¼“ì„ í†µí•´ ë°ì´í„° ì£¼ê³ ë°›ê¸°

7. **ì—°ê²° ì¢…ë£Œ (`close()`)**
   â†’ ì†Œì¼“ì„ ë‹«ê³  í†µì‹  ì¢…ë£Œ

---

## 4. WebSocket ê°œìš”

**WebSocket**ì€ **í•˜ë‚˜ì˜ TCP ì—°ê²°**ì„ í†µí•´ **ì „ì´ì¤‘(Full-Duplex) í†µì‹  ì±„ë„**ì„ ì œê³µí•˜ëŠ” í”„ë¡œí† ì½œì´ë‹¤.
HTTP í”„ë¡œí† ì½œ ìœ„ì—ì„œ ì‘ë™í•˜ë©°, **ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ **ì„ ìœ„í•´ ì„¤ê³„ë˜ì—ˆë‹¤.

### ğŸ”¹ ì£¼ìš” íŠ¹ì§•

* ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹  (Full Duplex)
* HTTP/HTTPS ê¸°ë°˜ìœ¼ë¡œ ë™ì‘ (ws://, wss://)
* ì´ˆê¸° Handshake ì´í›„ ì§€ì† ì—°ê²° ìœ ì§€
* ë©”ì‹œì§€ ë‹¨ìœ„ ì „ì†¡ (UTF-8 ì¸ì½”ë”©)
* ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹ 

---

## 5. WebSocket ë™ì‘ ê³¼ì •

### â‘  **í•¸ë“œì‰ì´í‚¹ (Opening Handshake)**

**ìš”ì²­ ì˜ˆì‹œ (Client â†’ Server)**

```http
GET /chat HTTP/1.1  ïƒ  ì—°ê²° ìˆ˜ë¦½
Host: localhost:8080 ïƒ  ì›¹ ì„œë²„ ì£¼ì†Œ
Upgrade: websocket  ïƒ  í”„ë¡œí† ì½œ ì „í™˜ì„ ìœ„í•œ í—¤ë”, í—¤ë”ê°€ ì—†ìœ¼ë©´ cross-protocol attack ê°„ì£¼í•¨.
Connection: Upgrade ïƒ  ìš”ì²­ ì™„ë£Œ í›„ ë„¤íŠ¸ì›Œí¬ ì ‘ì† ìœ ì§€ ì—¬ë¶€ (í•´ë‹¹ í—¤ë”ê°€ ì—†ê±°ë‚˜ ë‹¤ë¥¸ ê°’ì¼ ê²½ìš° ì¤‘ì§€)
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==  ïƒ  í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ ì¸ì¦
Sec-WebSocket-Protocol: chat, superchat 
ïƒ  í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•˜ëŠ” í”„ë¡œí† ì½œë“¤ë¡œ, í•˜ë‚˜ ì´ìƒì˜ ì›¹ ì†Œì¼“ í”„ë¡œí† ì½œë“¤ì„ ì§€ì • 
Sec-WebSocket-Version: 13  ïƒ  ë²„ì „
Origin: http://localhost:8001 ïƒ  í´ë¼ì´ì–¸íŠ¸ ì£¼ì†Œ (ì—†ìœ¼ë©´ ê±°ë¶€ ë  ìˆ˜ ìˆìŒ (CORSì •ì±…))

```

**ì‘ë‹µ ì˜ˆì‹œ (Server â†’ Client)**

```http
HTTP/1.1 101 Switching Protocols  ïƒ  ì›¹ ì†Œì¼“ ì—°ê²°
Upgrade: websocket 
Connection: Upgrade 
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk= 
ïƒ  Sec-WebSocket-Key ê°’ì„ unique id ê°’ì„ ë”í•´ SHA-1ë¡œ í•´ì‹±í•œ ê°’
Sec-WebSocket-Protocol: chat

```

> ğŸ‘‰ `Sec-WebSocket-Accept`ëŠ” `Sec-WebSocket-Key` + ê³ ì • ë¬¸ìì—´ì„ SHA-1ë¡œ í•´ì‹± í›„ Base64 ì¸ì½”ë”©í•œ ê°’ìœ¼ë¡œ ì¸ì¦ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.

---

### â‘¡ **ë°ì´í„° ì „ì†¡ (Data Transfer)**

* í”„ë¡œí† ì½œì´ **HTTP â†’ WS**ë¡œ ì „í™˜ë¨
* í¬íŠ¸ëŠ” HTTPì™€ ë™ì¼í•˜ê²Œ ì‚¬ìš© (`ws:80`, `wss:443`)
* ë°ì´í„°ëŠ” **Message ë‹¨ìœ„**ë¡œ ì£¼ê³ ë°›ìœ¼ë©° ì—¬ëŸ¬ **Frame**ìœ¼ë¡œ êµ¬ì„±
* UTF-8 ì¸ì½”ë”© ì‚¬ìš©
* `send()` / `onmessage()` ì´ë²¤íŠ¸ë¡œ ì†¡ìˆ˜ì‹  ì²˜ë¦¬

---

### â‘¢ **ì—°ê²° ì¢…ë£Œ (Close Handshake)**

* ì–´ëŠ í•œìª½ì´ `Close Frame` ì „ì†¡ ì‹œ ì¢…ë£Œ
* ìƒëŒ€ê°€ ì‘ë‹µ `Close Frame`ì„ ë³´ë‚´ë©´ ì—°ê²° ì¢…ë£Œ
* `close()` ë©”ì„œë“œë¡œ ì¢…ë£Œ ìˆ˜í–‰

---

## 6. Socket vs WebSocket ë¹„êµ

| í•­ëª©      | **WebSocket** | **TCP Socket** | **UDP Socket** |
| ------- | ------------- | -------------- | -------------- |
| í”„ë¡œí† ì½œ ê³„ì¸µ | ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ     | ì „ì†¡ ê³„ì¸µ          | ì „ì†¡ ê³„ì¸µ          |
| ì—°ê²° ë°©ì‹   | ì§€ì†ì ì¸ ì–‘ë°©í–¥ í†µì‹    | ì—°ê²° ì§€í–¥          | ë¹„ì—°ê²°í˜•           |
| ì‹ ë¢°ì„±     | ì¤‘ê°„            | ë†’ìŒ             | ë‚®ìŒ             |
| ìˆœì„œ ë³´ì¥   | ë³´ì¥            | ë³´ì¥             | ë³´ì¥ ì•ˆë¨          |
| ì†ë„      | ë¹ ë¦„            | ì¤‘ê°„             | ë§¤ìš° ë¹ ë¦„          |
| ëŒ€í‘œ ì‚¬ë¡€   | ì‹¤ì‹œê°„ ì±„íŒ…, ê²Œì„    | HTTP, ì´ë©”ì¼      | ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°, ê²Œì„   |

---

## 7. WebSocket ì˜ˆì œ (JavaScript & Node.js)

### ğŸ“± Client (JavaScript)

```javascript
// WebSocket ì—°ê²° ìƒì„±
const socket = new WebSocket("ws://localhost:8080");

// ì—°ê²° ì„±ê³µ ì‹œ
socket.addEventListener("open", (event) => {
    console.log("WebSocket ì—°ê²°ì´ ì—´ë ¸ìŠµë‹ˆë‹¤.");
    socket.send("Hello Server!");
});

// ì„œë²„ë¡œë¶€í„° ë©”ì‹œì§€ ìˆ˜ì‹ 
socket.addEventListener("message", (event) => {
    console.log("ì„œë²„ë¡œë¶€í„° ë°›ì€ ë©”ì‹œì§€:", event.data);
});

// ì—°ê²° ì¢…ë£Œ ì‹œ
socket.addEventListener("close", (event) => {
    console.log("WebSocket ì—°ê²°ì´ ë‹«í˜”ìŠµë‹ˆë‹¤.");
});

// ì—ëŸ¬ ë°œìƒ ì‹œ
socket.addEventListener("error", (event) => {
    console.error("WebSocket ì—ëŸ¬:", event);
});
```

---

### ğŸ’» Server (Node.js)

```javascript
const WebSocket = require('ws');

// WebSocket ì„œë²„ ìƒì„±
const wss = new WebSocket.Server({ port: 8080 });

wss.on('connection', (ws) => {
    console.log('í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.');

    // ë©”ì‹œì§€ ìˆ˜ì‹  ì‹œ
    ws.on('message', (message) => {
        console.log('í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ë©”ì‹œì§€:', message);
        ws.send('Hello Client!');
    });

    // ì—°ê²° ì¢…ë£Œ ì‹œ
    ws.on('close', () => {
        console.log('í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ì´ ë‹«í˜”ìŠµë‹ˆë‹¤.');
    });

    // ì—ëŸ¬ ë°œìƒ ì‹œ
    ws.on('error', (err) => {
        console.error('WebSocket ì—ëŸ¬:', err);
    });
});
```

---

