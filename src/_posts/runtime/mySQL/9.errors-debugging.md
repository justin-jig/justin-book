---
title: "MySQL 오류 및 디버깅 가이드 (Error Handling & Debugging)"
date: 2025-10-26
---

**version: 8.0.x**

---

#### 요약

- MySQL 사용 중 자주 발생하는 오류(에러 코드)와 원인, 해결 절차를 정리하였다.  
- SQL 구문 오류, 데이터 제약조건 위반, 트랜잭션 충돌 등은 대부분 **명령 순서·제약조건·모드 설정** 문제로 발생한다.  
- 본 문서는 CLI 환경 기준으로 **오류 식별 → 원인 분석 → 해결 절차**를 단계적으로 설명한다.  

> MySQL 오류는 대부분 **구문·제약조건·권한·트랜잭션** 영역에서 발생한다.
> 오류 메시지를 읽고 에러 코드로 유형을 분류하면 해결 속도가 10배 빨라진다.
> CLI에서 `desc`, `show`, `explain`, `show warnings` 4가지를 습관적으로 사용하면
> 복잡한 쿼리 문제도 빠르게 진단할 수 있다.


**핵심 포인트**
1. SQL 구문 오류 (`ERROR 1064`)  
2. 컬럼/테이블 참조 오류 (`ERROR 1054`, `ERROR 1146`)  
3. 제약조건 위반 (`ERROR 1048`, `ERROR 1062`, `ERROR 1452`)  
4. 트랜잭션 및 Deadlock 문제 (`ERROR 1213`)  
5. 디버깅 도구 (`desc`, `explain`, `show warnings`)  

---

##### 참고자료  
- [공식 문서: MySQL Error Code Reference](https://dev.mysql.com/doc/mysql-errors/8.0/en/)  
- 내부 문서:
  - `06-functions-operators.md` — 함수 호출 시 에러 진단  
  - `04-tcl.md` — 트랜잭션 에러 복구 절차  

---

#### 1. 구문 오류 (Syntax Error)

| 에러 코드 | 메시지 | 원인 | 해결 |
|------------|---------|------|------|
| `ERROR 1064 (42000)` | You have an error in your SQL syntax | 쉼표(,) 대신 마침표(.) 사용, 세미콜론 누락 | 구문 점검 및 `;` 추가 |
| `ERROR 1054 (42S22)` | Unknown column | 존재하지 않는 컬럼 참조 | `desc` 로 컬럼명 확인 |
| `ERROR 1146 (42S02)` | Table doesn't exist | 존재하지 않는 테이블 | `show tables;` 로 이름 확인 |

예시:
```sql
-- ❌ 잘못된 문법
create table tb1k(
  number varchar(5),
  name varchar(10).  -- 마침표로 인한 오류
  age int
);
-- ✅ 올바른 문법
create table tb1k(
  number varchar(5),
  name varchar(10),
  age int
);
```

---

#### 2. 제약조건 관련 오류

| 에러 코드        | 설명                   | 해결 방법                 |
| ------------ | -------------------- | --------------------- |
| `ERROR 1048` | NOT NULL 컬럼에 NULL 삽입 | DEFAULT 설정 또는 유효 값 삽입 |
| `ERROR 1062` | UNIQUE 키 중복          | PK 중복 제거              |
| `ERROR 1452` | FOREIGN KEY 제약 위반    | 참조 대상 존재 여부 확인        |

예시:

```sql
insert into tb1k (number, name, age) values('A101', null, 20);
-- ERROR 1048: Column 'name' cannot be null
```

---

#### 3. 트랜잭션 / Deadlock 오류

| 에러 코드        | 메시지                                    | 설명       | 해결                            |
| ------------ | -------------------------------------- | -------- | ----------------------------- |
| `ERROR 1213` | Deadlock found when trying to get lock | 교착상태 발생  | 트랜잭션 재시도 또는 쿼리 순서 조정          |
| `ERROR 1205` | Lock wait timeout exceeded             | 잠금 대기 초과 | `innodb_lock_wait_timeout` 조정 |

해결 절차:

1. `show engine innodb status\G` 로 원인 분석
2. 문제 트랜잭션의 쿼리 순서 변경
3. WHERE 조건을 세분화하여 교착 회피

---

#### 4. 인증 및 권한 오류

| 에러 코드        | 메시지                            | 원인            | 해결                          |
| ------------ | ------------------------------ | ------------- | --------------------------- |
| `ERROR 1045` | Access denied for user         | 비밀번호 불일치      | root 비밀번호 재설정               |
| `ERROR 1130` | Host is not allowed to connect | 원격 접근 차단      | `grant` 및 `bind-address` 설정 |
| `ERROR 1820` | You must reset your password   | 초기 비밀번호 변경 필요 | `alter user` 로 비밀번호 갱신      |

예시:

```sql
alter user 'root'@'localhost' identified by 'newpassword';
flush privileges;
```

---

#### 5. 디버깅 명령어 요약

| 명령                                | 기능           |
| --------------------------------- | ------------ |
| `desc <table>`                    | 컬럼 구조 확인     |
| `show create table <table>`       | 테이블 생성문 확인   |
| `explain <select 문>`              | 실행 계획 분석     |
| `show warnings;`                  | 최근 쿼리 경고 확인  |
| `show variables like 'sql_mode';` | SQL 실행 모드 확인 |

> ⚙️ `explain` 결과에서 `type`, `key`, `rows` 컬럼을 보면
> 쿼리의 효율(풀스캔 여부)을 빠르게 파악할 수 있다.

---

#### 6. SQL 모드 관련 오류

MySQL 8.0부터는 **STRICT / ONLY_FULL_GROUP_BY** 모드가 기본 활성화되어
기존 구문과 호환되지 않을 수 있다.

```sql
select @@sql_mode;

-- 임시 해제
set sql_mode = '';
```

| 모드                    | 설명               |
| --------------------- | ---------------- |
| `STRICT_TRANS_TABLES` | 잘못된 데이터 입력 차단    |
| `ONLY_FULL_GROUP_BY`  | 비집계 컬럼 SELECT 제한 |
| `ANSI_QUOTES`         | 쌍따옴표를 식별자로 인식    |

---

#### 7. 오류 로그 확인

| OS               | 로그 경로                        |
| ---------------- | ---------------------------- |
| Ubuntu           | `/var/log/mysql/error.log`   |
| macOS (Homebrew) | `/usr/local/var/mysql/*.err` |
| Docker           | `docker logs mysql8`         |

```bash
sudo tail -n 50 /var/log/mysql/error.log
```

> 🧩 로그에는 에러 발생 시점, 사용자, 세션 ID, 명령어가 함께 기록된다.

---

#### 8. 오류 흐름도 (Mermaid)

```mermaid
flowchart TD
  A[오류 발생] --> B[에러 코드 확인]
  B --> C{유형 분류}
  C -- Syntax --> D[구문 점검 (desc, ; 확인)]
  C -- Constraint --> E[제약조건 확인]
  C -- Transaction --> F[rollback / commit 점검]
  C -- Privilege --> G[grant / user 설정 확인]
  D --> H[해결 및 재실행]
  E --> H
  F --> H
  G --> H
```

---

#### 9. 실무 디버깅 예시

```sql
-- 예시: sum() 결과 정렬 오류
select number, sum(sales) as 합계
from tb
group by number
order by '합계';   -- ❌ 문자열 리터럴 정렬

-- 수정
order by 합계 desc; -- ✅ 별칭 정렬
```

---

