---
title: "Redis 설치 및 환경 구성 (Installation & Configuration)"
date: 2025-10-27
---

#### 요약

- Redis는 단일 실행 파일로 구성된 경량형 인메모리 서버로,  
  **로컬 설치, Docker, Kubernetes 등 다양한 환경에서 실행 가능**하다.  
- `redis.conf` 설정 파일을 통해 네트워크, 보안, 지속성, 클러스터링을 관리한다.  
- 실무에서는 **Docker Compose 기반의 서비스 구성**이 가장 일반적이며,  
  클러스터나 Sentinel을 통한 **고가용성(HA)** 구성이 중요하다.

Redis 설치는 단순하지만,
**환경별 설정 관리와 보안 구성**이 실무의 핵심이다.
운영 단계에서는 RDB/AOF 지속성, Sentinel 클러스터 구성,
TLS 설정을 반드시 검토해야 한다.

Redis는 “설치가 간단하지만 운영이 깊은” 시스템이며,
환경 자동화(Docker Compose, Helm Chart)를 통해 일관성을 확보하는 것이 가장 중요하다.

**핵심 요약**
1. 설치 방식: 로컬 / Docker / Kubernetes  
2. 설정 파일: `redis.conf` 주요 항목 정리  
3. 지속성(Persistence): RDB, AOF, Hybrid  
4. 보안 설정: bind, requirepass, TLS  
5. 운영 환경: Spring Boot, FastAPI, Node.js, NestJS 연동 예시  

---

##### 참고자료  
- [Redis 공식 설치 가이드](https://redis.io/docs/getting-started/installation/)  
- [Docker Redis Hub](https://hub.docker.com/_/redis)  
- [Redis Sentinel Documentation](https://redis.io/docs/interact/sentinel/)  

---

#### 1. Redis 설치 방법

##### (1) 로컬 설치 (Ubuntu 예시)
```bash
sudo apt update
sudo apt install redis-server -y
sudo systemctl enable redis-server
sudo systemctl start redis-server
```

> 설치 후 상태 확인:

```bash
redis-cli ping
# → PONG
```

##### (2) macOS (Homebrew)

```bash
brew install redis
brew services start redis
```

##### (3) Docker 설치

```bash
docker run -d \
  --name redis \
  -p 6379:6379 \
  redis:7.2-alpine
```

> 확인:

```bash
docker exec -it redis redis-cli ping
# → PONG
```

---

#### 2. Docker Compose 예시 (실무형)

```yaml
version: "3.9"
services:
  redis:
    image: redis:7.2-alpine
    container_name: redis
    ports:
      - "6379:6379"
    volumes:
      - ./data:/data
    command: redis-server --appendonly yes
```

> 위 예시는 **AOF(Append Only File)** 모드 활성화 구성으로,
> 서버 재시작 시 데이터 복구가 가능하다.

---

#### 3. 주요 설정 파일 (redis.conf)

| 설정 항목              | 설명           | 예시                       |
| ------------------ | ------------ | ------------------------ |
| `bind`             | 접근 가능한 IP 지정 | `bind 127.0.0.1`         |
| `port`             | 서비스 포트       | `port 6379`              |
| `requirepass`      | 접근 비밀번호      | `requirepass myRedis123` |
| `maxmemory`        | 메모리 한도 설정    | `maxmemory 256mb`        |
| `maxmemory-policy` | 메모리 초과 시 정책  | `allkeys-lru`            |
| `appendonly`       | AOF 활성화      | `appendonly yes`         |
| `save`             | RDB 스냅샷 주기   | `save 900 1`             |

---

#### 4. Persistence(영속성) 설정

| 방식         | 설명           | 장점           | 단점           |
| ---------- | ------------ | ------------ | ------------ |
| **RDB**    | 주기적 스냅샷 저장   | 빠른 백업        | 일부 데이터 손실 가능 |
| **AOF**    | 모든 명령 로그 기록  | 데이터 유실 최소    | 파일 크기 증가     |
| **Hybrid** | RDB + AOF 병행 | 복원 속도↑, 안전성↑ | 메모리 부담       |

---

#### 5. 보안 설정

1. **IP 바인딩 제한**

   ```conf
   bind 127.0.0.1
   protected-mode yes
   ```

2. **비밀번호 설정**

   ```conf
   requirepass myStrongPassword123
   ```

3. **TLS 암호화 통신**

   * Redis 6.0 이상에서는 TLS 통신 지원
   * 서버 시작 시 인증서 지정

     ```bash
     redis-server --tls-port 6380 \
       --port 0 \
       --tls-cert-file redis.crt \
       --tls-key-file redis.key \
       --tls-ca-cert-file ca.crt
     ```

---

#### 6. 다양한 백엔드 프레임워크 연동 예시

##### (1) Spring Boot (Gradle)

```java
@Configuration
public class RedisConfig {
    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(factory);
        return template;
    }
}
```

##### (2) FastAPI

```python
import aioredis
redis = await aioredis.from_url("redis://localhost:6379")
await redis.set("health", "ok")
```

##### (3) Node.js

```js
import Redis from "ioredis";
const redis = new Redis();
await redis.set("status", "running");
```

##### (4) NestJS

```ts
@Injectable()
export class RedisService {
  constructor(@InjectRedis() private readonly redis: Redis) {}
  async health() {
    return this.redis.ping();
  }
}
```

---

#### 7. Kubernetes 환경 구성 예시 (간략 버전)

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis
spec:
  replicas: 1
  selector:
    matchLabels:
      app: redis
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
        - name: redis
          image: redis:7.2-alpine
          ports:
            - containerPort: 6379
          volumeMounts:
            - name: redis-data
              mountPath: /data
      volumes:
        - name: redis-data
          emptyDir: {}
```

---

