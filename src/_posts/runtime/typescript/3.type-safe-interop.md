---
title: "JavaScriptÂ·APIÂ·ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ íƒ€ì… ì•ˆì „ ì—°ë™ (Type-Safe Interoperability)"
date: 2025-10-27
---

#### ìš”ì•½
- ì‹¤ë¬´ì—ì„œëŠ” TypeScript ì½”ë“œê°€ **ìˆœìˆ˜ JS ì½”ë“œ, API ì‘ë‹µ, ì™¸ë¶€ SDK** ë“±ê³¼ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.  
- ì´ë•Œ íƒ€ì…ì´ ëª…ì‹œë˜ì§€ ì•Šì€ ë°ì´í„°ëŠ” ëŸ°íƒ€ì„ ì˜¤ë¥˜ì˜ ì£¼ìš” ì›ì¸ì´ ë˜ë¯€ë¡œ,  
  **íƒ€ì… ì•ˆì „ì„±(Type Safety)** ì„ ìœ ì§€í•˜ë©´ì„œ ìƒí˜¸ ì—°ë™í•˜ëŠ” íŒ¨í„´ì´ í•„ìš”í•˜ë‹¤.  
- ë³¸ ë¬¸ì„œì—ì„œëŠ” **JS â†” TS ìƒí˜¸ ì‘ìš©, JSON íŒŒì‹±, REST API ì‘ë‹µ ëª¨ë¸ë§, ì™¸ë¶€ SDK íƒ€ì… ë³´ê°•** ë“±  
  ë‹¤ì–‘í•œ í†µí•© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë‹¤ë£¬ë‹¤.  

**í•µì‹¬ ìš”ì•½**
1. `any` ëŒ€ì‹  `unknown`ì„ ì‚¬ìš©í•´ ë¶ˆëª…í™•í•œ ì™¸ë¶€ ì…ë ¥ì„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•œë‹¤.  
2. JSON íŒŒì‹± ì‹œ íƒ€ì… ë‹¨ì–¸ë³´ë‹¤ëŠ” **ëŸ°íƒ€ì„ ê²€ì¦(zod, io-ts)** ì„ ê²°í•©í•œë‹¤.  
3. REST API ì‘ë‹µì€ `ApiResponse<T>` êµ¬ì¡°ë¡œ ëª¨ë¸ë§í•´ ì¼ê´€ì„± ìˆê²Œ ê´€ë¦¬í•œë‹¤.  
4. ì™¸ë¶€ JS SDKë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” `declare module`ì„ í†µí•´ ë³´ê°•(augmentation)í•  ìˆ˜ ìˆë‹¤.  
5. Node.js, ë¸Œë¼ìš°ì €, Third-party í™˜ê²½ ê°„ íƒ€ì… ì°¨ì´ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤.  

| í•­ëª©                  | ìš”ì•½             |
| ------------------- | -------------- |
| **unknown**         | ì™¸ë¶€ ì…ë ¥ ì•ˆì „ ì²˜ë¦¬    |
| **zod/io-ts**       | ëŸ°íƒ€ì„ + íƒ€ì… ê²€ì¦ ë³‘í–‰ |
| **declare module**  | JS ë¼ì´ë¸ŒëŸ¬ë¦¬ ë³´ê°•    |
| **ApiResponse<T>**  | í†µí•© ì‘ë‹µ ëª¨ë¸       |
| **í™˜ê²½ ë³€ìˆ˜ íƒ€ì…í™”**       | ProcessEnv í™•ì¥  |
| **type-safe fetch** | API í˜¸ì¶œ ì•ˆì „ì„± í™•ë³´  |

> TypeScriptì˜ ì§„ì •í•œ ê°•ì ì€
> **ë‚´ë¶€ ë¡œì§ë¿ ì•„ë‹ˆë¼ ì™¸ë¶€ ì„¸ê³„ì™€ì˜ ê²½ê³„ë¥¼ ì•ˆì „í•˜ê²Œ ë§Œë“œëŠ” ë° ìˆë‹¤.**
> ì¦‰, â€œíƒ€ì…ì€ ì‹œìŠ¤í…œ ê°„ ê³„ì•½(Contract)ì˜ ì–¸ì–´â€ì´ë©°,
> ì•ˆì „í•œ ìƒí˜¸ ìš´ìš©ì´ì•¼ë§ë¡œ TypeScript ì•„í‚¤í…ì²˜ì˜ ì™„ì„±ì´ë‹¤.

##### ì°¸ê³ ìë£Œ
- [TypeScript Docs â€“ Interoperability](https://www.typescriptlang.org/docs/handbook/declaration-files/templates/module-d-ts.html)
- [zod Validation Library](https://zod.dev)
- [io-ts Functional Runtime Types](https://gcanti.github.io/io-ts/)

##### í†µí•© ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
graph LR
A["External API / SDK / JS Library"]
B["Type Validation zod/io-ts"]
C["TypeScript Code"]
D["UI / Service Layer"]

A --> B --> C --> D

```
> TypeScript Code -->| ApiResponse<T> | Type Validation zod/io-ts <br/>
> âš™ï¸ ì™¸ë¶€ â†’ ë‚´ë¶€ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ë°ì´í„°ëŠ”
> **Validation â†’ Inference â†’ Usage** ìˆœìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤.

---

#### 1. JS â†” TS ìƒí˜¸ ì‘ìš©ì˜ ì›ì¹™

> â€œJSëŠ” ì‹¤í–‰ ì¤‘ì‹¬, TSëŠ” íƒ€ì… ì¤‘ì‹¬ â€” ë‘ ì–¸ì–´ì˜ ê²½ê³„ì—ì„œ ì•ˆì „ì„±ì„ í™•ë³´í•´ì•¼ í•œë‹¤.â€

| êµ¬ë¶„ | ì›ì¹™ |
|------|------|
| **JS â†’ TS** | ì™¸ë¶€ ë°ì´í„°ëŠ” í•­ìƒ ê²€ì¦ í›„ ì‚¬ìš© (`unknown` â†’ íƒ€ì… ê°€ë“œ) |
| **TS â†’ JS** | íƒ€ì… ì •ë³´ëŠ” ì»´íŒŒì¼ ì‹œ ì œê±°ë˜ë¯€ë¡œ, ëŸ°íƒ€ì„ ì˜ì¡´ ê¸ˆì§€ |
| **ESM â†” CJS** | `esModuleInterop: true` ì„¤ì •ìœ¼ë¡œ í˜¸í™˜ì„± í™•ë³´ |
| **ë™ì  import** | `import()` ë¬¸ë²•ìœ¼ë¡œ íƒ€ì… ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ ê°€ëŠ¥ |

```ts
// JS ëª¨ë“ˆ import ì˜ˆì‹œ
import legacy from "./legacy.js";

// íƒ€ì… ë‹¨ì–¸
const result = (legacy as { init: () => void }).init();
```

> âš™ï¸ JS ì½”ë“œë¥¼ ì§ì ‘ ë¶ˆëŸ¬ì˜¬ ë•ŒëŠ” ë°˜ë“œì‹œ **íƒ€ì… ë‹¨ì–¸(type assertion)** ì´ë‚˜
> **ë³´ê°•(declare module)** ì„ ì–¸ìœ¼ë¡œ íƒ€ì… êµ¬ì¡°ë¥¼ ëª…ì‹œí•´ì•¼ í•œë‹¤.

---

#### 2. `unknown`ì„ í™œìš©í•œ ì•ˆì „í•œ ì™¸ë¶€ ë°ì´í„° ì²˜ë¦¬

```ts
function parseData(data: unknown) {
  if (typeof data === "object" && data !== null && "id" in data) {
    return (data as { id: number }).id;
  }
  throw new Error("Invalid data format");
}
```

| ë¹„êµ                              | ì„¤ëª…                   |
| ------------------------------- | -------------------- |
| `any`                           | íƒ€ì… ê²€ì¦ ìƒëµ â†’ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ê°€ëŠ¥ |
| `unknown`                       | ê²€ì¦ ì „ ì‚¬ìš© ë¶ˆê°€ â†’ ì•ˆì „í•œ ì²˜ë¦¬  |
| `typeof`, `in`, `Array.isArray` | ê¸°ë³¸ì ì¸ ëŸ°íƒ€ì„ ê²€ì¦ ë„êµ¬       |

> ğŸ’¡ **â€œë¶ˆí™•ì‹¤í•œ ë°ì´í„°ëŠ” unknownë¶€í„° ì‹œì‘í•˜ë¼.â€**
> ê·¸ í›„ ì¢í˜€ë‚˜ê°€ë©° íƒ€ì…ì„ ì•ˆì „í•˜ê²Œ í™•ì •í•´ì•¼ í•œë‹¤.

---

#### 3. JSON ë°ì´í„° ë³€í™˜ ì‹œ ì£¼ì˜ì‚¬í•­

> API ì‘ë‹µ ë“± ì™¸ë¶€ JSONì„ ë‹¤ë£° ë•Œ ê°€ì¥ í”í•œ ì˜¤ë¥˜ëŠ”
> â€œíƒ€ì… ë‹¨ì–¸ë§Œìœ¼ë¡œ êµ¬ì¡°ë¥¼ ì‹ ë¢°í•˜ëŠ” ê²ƒâ€ì´ë‹¤.

```ts
// âŒ ë‚˜ìœ ì˜ˆì‹œ
const user = JSON.parse(data) as { id: number; name: string };

// âœ… ì•ˆì „í•œ ë°©ì‹
import { z } from "zod";

const UserSchema = z.object({
  id: z.number(),
  name: z.string()
});

type User = z.infer<typeof UserSchema>;
const user = UserSchema.parse(JSON.parse(data));
```

| ë°©ë²•              | ì„¤ëª…                 |
| --------------- | ------------------ |
| `as` ë‹¨ì–¸         | ëŸ°íƒ€ì„ ê²€ì¦ ì—†ìŒ          |
| `zod` / `io-ts` | íƒ€ì… + ëŸ°íƒ€ì„ ìŠ¤í‚¤ë§ˆ ë³‘í–‰ ê²€ì¦ |
| `z.infer`       | TS íƒ€ì… ìë™ ì¶”ë¡         |

> âš™ï¸ ëŸ°íƒ€ì„ ê²€ì¦ì„ ë„ì…í•˜ë©´ ì™¸ë¶€ API ë³€ê²½ìœ¼ë¡œ ì¸í•œ íƒ€ì… ì˜¤ë¥˜ë¥¼ ì¡°ê¸°ì— ê°ì§€í•  ìˆ˜ ìˆë‹¤.

---

#### 4. REST API ì‘ë‹µ íƒ€ì… ëª¨ë¸ë§

```ts
export type ApiResponse<T> = {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
  };
};
```

```ts
type User = { id: number; name: string };

async function fetchUser(id: number): Promise<ApiResponse<User>> {
  const res = await fetch(`/api/users/${id}`);
  const json = await res.json();
  return { success: true, data: json };
}
```

| ì¥ì           | ì„¤ëª…                           |
| ----------- | ---------------------------- |
| êµ¬ì¡°ì  ì¼ê´€ì„±     | ëª¨ë“  API ì‘ë‹µ í˜•ì‹ í†µì¼              |
| íƒ€ì… ê¸°ë°˜ ì—ëŸ¬ ì²˜ë¦¬ | `data`/`error` êµ¬ë¶„            |
| ì¬ì‚¬ìš©ì„±        | `ApiResponse<T>` ì œë„¤ë¦­ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥ |

> ğŸ’¡ Frontâ€“Back ê°„ API ì—°ë™ ì‹œ, `ApiResponse<T>` êµ¬ì¡°ëŠ” â€œê³„ì•½ì˜ í‘œì¤€í™”â€ ì—­í• ì„ í•œë‹¤.

---

#### 5. ì™¸ë¶€ SDK íƒ€ì… ë³´ê°• (`declare module`)

> íƒ€ì…ì´ í¬í•¨ë˜ì§€ ì•Šì€ ì™¸ë¶€ SDKë‚˜ JS ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì§ì ‘ ë³´ê°•í•  ìˆ˜ ìˆë‹¤.

```ts
// types/legacy-sdk.d.ts
declare module "legacy-sdk" {
  export interface LegacyConfig {
    apiKey: string;
    debug?: boolean;
  }

  export function initialize(config: LegacyConfig): void;
  export function getVersion(): string;
}
```

```ts
// ì‚¬ìš© ì˜ˆì‹œ
import { initialize } from "legacy-sdk";

initialize({ apiKey: "12345" });
```

| íŠ¹ì§•                 | ì„¤ëª…                  |
| ------------------ | ------------------- |
| `declare module`   | íƒ€ì… ì •ì˜ê°€ ì—†ëŠ” ëª¨ë“ˆ ë³´ê°•     |
| `export interface` | ì˜µì…˜ ê°ì²´ êµ¬ì¡° ì •ì˜         |
| ìœ ì§€ë³´ìˆ˜               | SDK ì—…ë°ì´íŠ¸ ì‹œ ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥ |

> âš™ï¸ **SDKê°€ JS-onlyì¸ ê²½ìš°**, íƒ€ì… ì„ ì–¸ íŒŒì¼ì„ `/types` í´ë”ì— í¬í•¨ì‹œì¼œ ê´€ë¦¬í•´ì•¼ í•œë‹¤.

---

#### 6. Node.js ì™¸ë¶€ í™˜ê²½ ë³€ìˆ˜ ì•ˆì „ ê´€ë¦¬

> `.env` íŒŒì¼ì˜ ê°’ì€ ì „ë¶€ ë¬¸ìì—´(string)ë¡œ ì£¼ì…ë˜ë¯€ë¡œ
> TypeScriptì—ì„œ ëª…ì‹œì ìœ¼ë¡œ í˜• ë³€í™˜ê³¼ ê²€ì¦ì´ í•„ìš”í•˜ë‹¤.

```ts
declare namespace NodeJS {
  interface ProcessEnv {
    NODE_ENV: "development" | "production" | "test";
    PORT?: string;
    DATABASE_URL: string;
  }
}
```

```ts
const port = Number(process.env.PORT ?? 3000);
```

| ì£¼ì˜ì           | ì„¤ëª…                   |
| ------------ | -------------------- |
| ëª¨ë“  ê°’ì€ string | ìˆ«ì/ë¶ˆë¦° ë³€í™˜ í•„ìš”          |
| `!` ë‹¨ì–¸ ì‚¬ìš© ìì œ | ê¸°ë³¸ê°’ ë˜ëŠ” ê²€ì¦ ì¶”ê°€         |
| `dotenv`     | ëŸ°íƒ€ì„ í™˜ê²½ ë¡œë“œ ì‹œ íƒ€ì… ì ìš© ë¶ˆê°€ |

> ğŸ’¡ í™˜ê²½ ë³€ìˆ˜ íƒ€ì…ì€ `global.d.ts`ì— ì •ì˜í•˜ê³ ,
> ì½”ë“œì—ì„œëŠ” â€œëª…ì‹œì  ë³€í™˜â€ì„ í†µí•´ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•œë‹¤.

---

#### 7. ë¸Œë¼ìš°ì € ê°ì²´ í™•ì¥ (Window, Navigator)

```ts
declare global {
  interface Window {
    __APP_VERSION__: string;
    currentUser?: { id: number; name: string };
  }
}
```

```ts
if (window.currentUser) {
  console.log(window.currentUser.name);
}
```

| í•­ëª©               | ì„¤ëª…                  |
| ---------------- | ------------------- |
| `declare global` | ì „ì—­ ë¸Œë¼ìš°ì € ê°ì²´ í™•ì¥       |
| `window.` ì†ì„±     | ì•± ìƒíƒœ, ë¹Œë“œ ì •ë³´ ì£¼ì… ì‹œ ì‚¬ìš© |
| `optional` ì†ì„±    | ì´ˆê¸°í™” ì „ ì•ˆì „í•œ ì ‘ê·¼ ë³´ì¥     |

> âš™ï¸ ì´ íŒ¨í„´ì€ SPA í™˜ê²½ì—ì„œ â€œì „ì—­ ëŸ°íƒ€ì„ ì»¨í…ìŠ¤íŠ¸â€ë¥¼ ëª¨ë¸ë§í•  ë•Œ ìœ ìš©í•˜ë‹¤.

---

#### 8. Type-Safe Fetch ë˜í¼ êµ¬í˜„

> Fetch APIë¥¼ íƒ€ì… ì•ˆì „í•˜ê²Œ ê°ì‹¸ëŠ” íŒ¨í„´

```ts
type Fetcher<T> = (url: string) => Promise<ApiResponse<T>>;

async function safeFetch<T>(url: string): Promise<ApiResponse<T>> {
  try {
    const res = await fetch(url);
    const data: T = await res.json();
    return { success: true, data };
  } catch (err: any) {
    return { success: false, error: { code: "FETCH_ERR", message: err.message } };
  }
}
```

```ts
const result = await safeFetch<{ id: number; name: string }>("/api/user/1");
if (result.success) console.log(result.data.name);
```

| ì¥ì        | ì„¤ëª…                     |
| -------- | ---------------------- |
| ì œë„¤ë¦­ ì‚¬ìš©   | ì‘ë‹µ ë°ì´í„° íƒ€ì… ì§€ì • ê°€ëŠ¥        |
| ì—ëŸ¬ êµ¬ì¡° í†µì¼ | `success: false` íŒ¨í„´ ìœ ì§€ |
| ì•ˆì „ì„±      | ëŸ°íƒ€ì„ ì—ëŸ¬ ìµœì†Œí™”             |

> ğŸ¯ ì‹¤ì œ ë°±ì—”ë“œì™€ì˜ í†µì‹ ì—ì„œë„ ë™ì¼í•œ íƒ€ì… êµ¬ì¡°(`ApiResponse<T>`)ë¥¼ ì‚¬ìš©í•˜ë©´
> í”„ë¡ íŠ¸â€“ë°± ê°„ íƒ€ì… ë¶ˆì¼ì¹˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

---

#### 9. JS â†’ TS ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„ë³„ ì ‘ê·¼

| ë‹¨ê³„  | ì„¤ëª…                          | ë¹„ê³             |
| --- | --------------------------- | ------------- |
| 1ï¸âƒ£ | `.js` íŒŒì¼ì— `// @ts-check` ì¶”ê°€ | íƒ€ì… ì˜¤ë¥˜ ê°ì§€ ì‹œì‘   |
| 2ï¸âƒ£ | `.d.ts` íŒŒì¼ ì‘ì„±               | ì™¸ë¶€ íƒ€ì… ì •ì˜      |
| 3ï¸âƒ£ | íŒŒì¼ í™•ì¥ì `.ts`ë¡œ ë³€ê²½            | ì ì§„ì  ë³€í™˜        |
| 4ï¸âƒ£ | strict ì˜µì…˜ í™œì„±í™”               | ì™„ì „í•œ íƒ€ì… ì•ˆì „ì„± í™•ë³´ |

> ğŸ’¡ â€œëª¨ë“  JSë¥¼ í•œ ë²ˆì— TSë¡œ ë°”ê¾¸ì§€ ë§ê³ , ì ì§„ì ìœ¼ë¡œ ê²€ì¦í•˜ë©° í™•ì¥í•˜ë¼.â€

---

#### 10. ì„œë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ í†µí•© ì‹œ ì£¼ì˜ì‚¬í•­

| í•­ëª©                     | ì„¤ëª…                                                  |
| ---------------------- | --------------------------------------------------- |
| **React / Next.js**    | íƒ€ì… ìë™ ì§€ì› (`@types/react`)                           |
| **Firebase / AWS SDK** | Promise ê¸°ë°˜ ì‘ë‹µ â†’ ì œë„¤ë¦­ ë˜í•‘ í•„ìš”                           |
| **Stripe / Twilio ë“±**  | ì¼ë¶€ SDKëŠ” Any ê¸°ë°˜ â†’ Custom `.d.ts` ì‘ì„±                  |
| **GraphQL / gRPC**     | ì½”ë“œ ìƒì„±ê¸°ë¡œ íƒ€ì… ìë™ ìƒì„± (`graphql-codegen`, `protobuf-ts`) |

> âš™ï¸ ê°€ëŠ¥í•˜ë‹¤ë©´ **ê³µì‹ SDK + íƒ€ì… ìƒì„±ê¸°** ì¡°í•©ì„ í™œìš©í•˜ë¼.
> ì§ì ‘ ì‘ì„± ì‹œì—” `declare module` íŒŒì¼ì„ í”„ë¡œì íŠ¸ì— í¬í•¨í•´ì•¼ í•œë‹¤.

---


