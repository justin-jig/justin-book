---
title: "컨테이너 수명주기와 재시작 정책 (Lifecycle and Restart Policy)"
date: 2025-10-23
---

#### 요약  
Docker 컨테이너는 이미지로부터 생성되어 실행되고, 종료 후 필요에 따라 재시작되거나 삭제된다.  
이 전체 과정을 **컨테이너 수명주기(Lifecycle)** 라고 하며,  
이를 제어하기 위해 Docker는 **Restart Policy(재시작 정책)** 을 제공한다.  

* 컨테이너는 단일 프로세스 기반으로 생성과 삭제가 빠르다.
* 재시작 정책을 적절히 설정하면 장애 복구 자동화가 가능하다.
* 수명주기를 이해하면 Docker Compose나 Swarm 등 상위 오케스트레이션에서도 유용하다.


**핵심 정리**
- 컨테이너의 상태는 `created → running → stopped → removed` 로 변한다.  
- 재시작 정책(`--restart`)을 통해 자동 복구가 가능하다.  
- 컨테이너 상태는 `docker ps -a` 및 `docker inspect` 로 확인할 수 있다.  

##### 참고자료
- [Docker Docs – Container lifecycle](https://docs.docker.com/engine/reference/run/)
- [Restart policies – Docker Reference](https://docs.docker.com/config/containers/start-containers-automatically/)
- [Docker Inspect Reference](https://docs.docker.com/engine/reference/commandline/inspect/)

---

#### 1. 컨테이너 수명주기

| 단계 | 설명 |
|:--|:--|
| **Created** | 이미지에서 컨테이너 생성 (`docker create`) |
| **Running** | 컨테이너 실행 중 (`docker start` 또는 `docker run`) |
| **Stopped** | 컨테이너 종료 (정상/비정상) |
| **Removed** | 컨테이너 완전 삭제 (`docker rm`) |

```bash
docker create nginx
docker start <컨테이너ID>
docker stop <컨테이너ID>
docker rm <컨테이너ID>
```

---

#### 2. 재시작 정책 (Restart Policy)

| 정책               | 설명                     |
| :--------------- | :--------------------- |
| `no`             | 자동 재시작 안 함 (기본값)       |
| `always`         | 종료 시 항상 재시작            |
| `on-failure`     | 비정상 종료 시 재시작           |
| `unless-stopped` | 수동으로 중단하지 않는 이상 항상 재시작 |

```bash
docker run -d --restart=unless-stopped nginx
```

> 시스템 재부팅 이후에도 자동으로 컨테이너가 다시 실행된다.

---

#### 3. 상태 확인 및 로그 분석

```bash
docker ps -a
docker inspect <컨테이너ID> --format '{{.State.Status}}'
docker logs -f <컨테이너ID>
```

> `inspect` 명령은 컨테이너의 세부 상태(업타임, ExitCode, RestartCount 등)를 보여준다.

---

