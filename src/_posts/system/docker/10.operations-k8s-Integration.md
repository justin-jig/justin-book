---
title: "Kubernetes 연동 및 브리지 운영 (K8s Integration)"
date: 2025-10-23
---

#### 요약  
Docker는 Kubernetes(K8s)와 완벽하게 호환되며,  
Docker 이미지 기반으로 Pod를 실행할 수 있다.  
CI/CD 파이프라인과 연계하여 Swarm에서 K8s로 확장할 수 있다.  

* Docker 이미지는 K8s의 표준 실행 단위이다.
* Compose → YAML 변환으로 손쉽게 이관 가능하다.
* Swarm 대비 더 세밀한 스케줄링과 오토스케일링을 지원한다.

**핵심 정리**
- Docker 이미지 = K8s의 기본 배포 단위(ContainerSpec).  
- `kubectl` 과 `docker` 명령은 공통 컨테이너 런타임을 공유한다.  
- Compose 파일은 `kompose` 도구로 K8s YAML로 변환 가능하다.  

##### 참고자료
- [Docker + Kubernetes Integration](https://docs.docker.com/desktop/kubernetes/)
- [Kompose Project](https://kompose.io/)
- [K8s Deployment Guide](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/)

---

#### 1. Docker 이미지 → K8s Pod
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: myapp
spec:
  containers:
    - name: myapp
      image: user/myapp:1.0
      ports:
        - containerPort: 8080
```

> Docker 이미지가 그대로 Kubernetes Pod로 실행된다.

---

#### 2. Deployment 예시

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
spec:
  replicas: 3
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
    spec:
      containers:
        - name: myapp
          image: user/myapp:1.0
          ports:
            - containerPort: 8080
```

> Swarm의 `replicas` 개념이 그대로 `Deployment.replicas` 로 매핑된다.

---

#### 3. Compose → K8s 변환 (kompose)

```bash
kompose convert -f docker-compose.yml -o k8s/
```

> Docker Compose 구성을 자동으로 Deployment, Service YAML로 변환한다.

---

#### 4. 배포 및 스케일링

```bash
kubectl apply -f k8s/
kubectl scale deployment myapp --replicas=5
```

> 선언적 배포 및 자동 스케일링이 가능하다.

---

#### 5. 브리지 운영 전략

* Swarm → K8s 이관 시 **이미지, 볼륨, 네트워크 네이밍 일관성** 유지
* CI/CD 파이프라인에서 `docker build → kubectl apply` 구조로 확장
* Helm, ArgoCD 등과 연동해 GitOps 방식으로 관리

---

