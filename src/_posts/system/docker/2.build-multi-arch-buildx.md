---
title: "멀티 아키텍처 빌드와 Buildx 사용 (Multi-Arch Build)"
date: 2025-10-23
---

#### 요약  
멀티 아키텍처 빌드는 여러 CPU 플랫폼(amd64, arm64 등)에 대응하는 이미지를  
**단일 이미지 이름으로 통합 제공**하기 위한 기술이다.  
Docker의 `buildx` 도구는 멀티 플랫폼 빌드를 자동화하고 캐시 효율을 향상시킨다.  


* `buildx`는 멀티 아키텍처 빌드의 표준 도구다.
* `--platform` 옵션으로 여러 환경용 이미지를 한 번에 빌드 가능하다.
* QEMU 설정을 통해 로컬에서도 cross-build 환경을 구성할 수 있다.
* Multi-Arch 이미지는 배포 효율과 호환성을 크게 향상시킨다.

**핵심 정리**
- `buildx`는 고급 빌드 도구로 멀티 아키텍처 빌드 지원  
- `--platform` 옵션으로 타깃 아키텍처 지정 가능  
- QEMU 에뮬레이션을 활용해 다른 CPU 환경도 빌드 가능  
- Multi-Arch 이미지는 Docker Hub에서 자동 인식  

##### 참고자료
- [Docker Docs – buildx](https://docs.docker.com/build/buildx/)
- [Multi-platform images guide](https://docs.docker.com/build/building/multi-platform/)
- [QEMU User Emulation](https://github.com/multiarch/qemu-user-static)

---

#### 1. buildx 활성화
```bash
docker buildx create --use
docker buildx inspect --bootstrap
```

> `--use` 플래그로 현재 빌드 컨텍스트를 Buildx로 전환한다.

---

#### 2. 멀티 플랫폼 빌드 명령

```bash
docker buildx build \
  --platform linux/amd64,linux/arm64 \
  -t myapp:multiarch \
  --push .
```

> 두 가지 아키텍처용 이미지를 동시에 빌드하고,
> Docker Hub에 하나의 이미지 이름으로 업로드한다.

---

#### 3. QEMU 설정 (에뮬레이션)

```bash
docker run --rm --privileged multiarch/qemu-user-static --reset -p yes
```

> 다른 CPU 아키텍처의 바이너리를 실행할 수 있도록 QEMU를 활성화한다.

---

#### 4. 이미지 확인

```bash
docker buildx imagetools inspect myapp:multiarch
```

출력 예시:

```
Name: myapp:multiarch
Platforms: linux/amd64, linux/arm64
```

---
