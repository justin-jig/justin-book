---
title: "리버스 프록시 설정 (Nginx 기반)"
date: 2025-10-23
---

#### 요약  
리버스 프록시는 클라이언트 요청을 내부 컨테이너 서비스로 전달하는 중간 게이트웨이 역할을 한다.  
Docker 환경에서는 주로 **Nginx** 나 **Traefik** 을 사용하며,  
여러 백엔드 서비스(web, api 등)를 하나의 도메인 아래에서 관리할 수 있다.  

* 리버스 프록시는 여러 컨테이너 서비스를 하나의 엔드포인트로 묶는다.
* Nginx 기반 설정은 단순하고 Compose와 연동이 쉽다.
* HTTPS 인증서와 Traefik을 활용하면 자동화된 보안 라우팅 구성이 가능하다.

**핵심 정리**
- 리버스 프록시는 클라이언트 요청을 내부 서비스로 라우팅한다.  
- Nginx는 단일 도메인 또는 경로 기반 라우팅을 쉽게 설정할 수 있다.  
- `nginx.conf`를 마운트하여 설정 변경이 가능하다.  

##### 참고자료
- [Docker Docs – Networking and links](https://docs.docker.com/network/links/)
- [Nginx Reverse Proxy Guide](https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/)
- [Traefik Proxy Overview](https://doc.traefik.io/traefik/)

---

#### 1. 구성 예시 (Compose 기반)

```yaml
version: "3.9"
services:
  nginx:
    image: nginx:latest
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - web
      - api

  web:
    image: myapp/web:1.0
    expose:
      - "8080"

  api:
    image: myapp/api:1.0
    expose:
      - "5000"
```
---

#### 2. Nginx 설정 파일 예시 (`nginx.conf`)

```nginx
events {}

http {
  upstream web_app {
    server web:8080;
  }

  upstream api_app {
    server api:5000;
  }

  server {
    listen 80;

    location / {
      proxy_pass http://web_app;
    }

    location /api/ {
      proxy_pass http://api_app;
    }
  }
}
```

> `web` 과 `api` 는 Compose 네트워크 이름을 기반으로 자동 DNS 해석된다.

---

#### 3. HTTPS 적용 (Let's Encrypt 예시)

```yaml
version: "3.9"
services:
  nginx:
    image: nginx:latest
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./certs:/etc/ssl/private
```

> `certs` 디렉터리에 인증서(`fullchain.pem`, `privkey.pem`)를 배치하면
> SSL이 적용된 리버스 프록시 환경을 구성할 수 있다.

---

#### 4. Traefik을 활용한 동적 프록시 (참고)

```yaml
services:
  traefik:
    image: traefik:v3.0
    command:
      - "--providers.docker=true"
      - "--entrypoints.web.address=:80"
    ports:
      - "80:80"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
```

> Traefik은 라벨 기반 자동 라우팅을 지원하여 대규모 서비스 관리에 적합하다.

---
