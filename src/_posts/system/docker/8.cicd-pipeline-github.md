---
title: "CI/CD 구성 예시 (2) – GitHub Actions 기반"
date: 2025-10-23
---

#### 요약  
GitHub Actions는 코드 저장소와 통합된 CI/CD 플랫폼으로,  
Docker 빌드 및 배포를 자동화하는 가장 손쉬운 방법 중 하나이다.  


* GitHub Actions는 YAML 기반으로 손쉽게 파이프라인을 구성할 수 있다.
* Docker Buildx + login-action 조합이 표준 구조다.
* Secrets 관리로 보안성을 높이고, SSH 배포까지 자동화할 수 있다.

**핵심 정리**
- `.github/workflows/` 폴더 내 YAML 파일로 파이프라인 정의  
- `docker build`, `push`, `deploy` 단계 자동화  
- Secrets(GITHUB_TOKEN, REGISTRY_CREDENTIALS 등)으로 인증 관리  

##### 참고자료
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Docker Official Action](https://github.com/docker/login-action)
- [Best Practices for Docker Actions](https://docs.docker.com/ci-cd/github-actions/)

---

#### 1. GitHub Actions 예시

```yaml
name: Docker CI/CD Pipeline

on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Login to DockerHub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}

      - name: Build and Push Image
        uses: docker/build-push-action@v6
        with:
          push: true
          tags: user/myapp:latest
```

---

#### 2. 환경 변수 활용

```yaml
env:
  REGISTRY: ghcr.io/user
  IMAGE_NAME: myapp
```

> 환경 변수로 이미지 이름 및 레지스트리 주소를 재사용 가능하게 설정한다.

---

#### 3. 배포 단계 (옵션)

```yaml
  deploy:
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy via SSH
        uses: appleboy/ssh-action@v1
        with:
          host: ${{ secrets.SERVER_IP }}
          username: ubuntu
          key: ${{ secrets.SSH_KEY }}
          script: |
            docker pull user/myapp:latest
            docker compose -f /opt/app/docker-compose.yml up -d
```

---

