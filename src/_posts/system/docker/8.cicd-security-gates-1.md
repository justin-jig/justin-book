---
title: "보안 스캔 게이트 구성 (Security Gates 1)"
date: 2025-10-23
---

#### 요약  
CI/CD 파이프라인에 **보안 스캔 게이트(Security Gate)** 를 추가하면  
취약한 이미지나 코드가 배포되는 것을 사전에 차단할 수 있다.  
Trivy, Grype, Cosign 등을 파이프라인에 삽입하여 자동 검사 체계를 구축할 수 있다.  

* 보안 스캔 게이트는 DevSecOps의 필수 구성 요소이다.
* Trivy, Cosign, SBOM 조합으로 공급망 공격을 사전에 방지한다.
* “빌드 완료 → 보안검사 → 배포” 순으로 프로세스를 구성한다.



**핵심 정리**
- 보안 게이트는 빌드 완료 후 배포 전 검증 단계이다.  
- 이미지 스캔, 서명 검증, SBOM 생성 단계로 구성된다.  
- 실패 시 파이프라인이 자동 중단되어 안전성이 확보된다.  

##### 참고자료
- [Trivy Action](https://github.com/aquasecurity/trivy-action)
- [Sigstore + CI/CD Integration](https://docs.sigstore.dev/)
- [Grype Integration Guide](https://github.com/anchore/grype)

---

#### 1. GitHub Actions 예시
```yaml
- name: Scan image with Trivy
  uses: aquasecurity/trivy-action@master
  with:
    image-ref: user/myapp:latest
    exit-code: '1'
    severity: 'HIGH,CRITICAL'
````

> 취약점 심각도(HIGH 이상)가 발견되면 파이프라인이 실패한다.

---

#### 2. SBOM 자동 생성

```yaml
- name: Generate SBOM
  run: trivy image --format cyclonedx --output sbom.xml user/myapp:latest
```

> 결과 파일을 아티팩트로 업로드하여 감사 이력 관리 가능.

---

#### 3. 서명 검증 단계

```yaml
- name: Verify signature
  run: cosign verify user/myapp:latest --key cosign.pub
```

> Cosign 서명을 검증해 무결성을 확인한다.

---

