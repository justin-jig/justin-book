---
title: "Docker 레지스트리 개요 및 구조 (Registry Overview)"
date: 2025-10-23
---

#### 요약  
Docker 레지스트리는 컨테이너 이미지를 저장하고 배포하기 위한 중앙 저장소이다.  
대표적인 예시는 **Docker Hub**, **Harbor**, **GitHub Container Registry**, **AWS ECR** 등이 있으며,  
조직 내 보안과 네트워크 정책에 따라 **프라이빗 레지스트리(Private Registry)** 로도 구성할 수 있다.  

* 레지스트리는 이미지 관리의 핵심 구성요소이다.
* `registry:2` 이미지를 사용해 자체 구축 가능하다.
* HTTPS 인증과 사용자 인증을 반드시 적용해 보안을 강화한다.

**핵심 정리**
- Docker 이미지는 태그(tag) 기반으로 버전 관리된다.  
- `docker push` / `pull` 명령으로 이미지 업로드 및 다운로드 가능.  
- 프라이빗 레지스트리는 인증(토큰 또는 기본 계정) 기반 접근 제어 필요.  

##### 참고자료
- [Docker Docs – Registry Overview](https://docs.docker.com/registry/)
- [Harbor Documentation](https://goharbor.io/docs/)
- [GitHub Container Registry](https://docs.github.com/packages/working-with-a-github-packages-registry)

---

#### 1. 기본 구조

```mermaid
flowchart LR
  A["Docker Client"] --> B["Registry (Hub/Harbor)"]
  B --> C["Kubernetes / Compose Deployment"]
  style B fill:#fef9c3,stroke:#d97706
````

> 사용자는 `docker push` 로 이미지를 업로드하고,
> 배포 환경에서는 `docker pull` 로 이미지를 가져온다.

---

#### 2. 주요 명령어

| 명령              | 설명           |
| :-------------- | :----------- |
| `docker login`  | 레지스트리 인증     |
| `docker tag`    | 이미지에 새 태그 추가 |
| `docker push`   | 이미지 업로드      |
| `docker pull`   | 이미지 다운로드     |
| `docker logout` | 인증 세션 종료     |

---

#### 3. 예시 – 프라이빗 레지스트리 설정

```bash
docker run -d -p 5000:5000 --name registry registry:2
```

> 로컬에서 `localhost:5000` 프라이빗 레지스트리를 실행한다.

이미지 업로드 예시:

```bash
docker tag nginx localhost:5000/nginx:v1
docker push localhost:5000/nginx:v1
```

---

#### 4. 인증 구성 (HTTP → HTTPS)

```bash
mkdir -p auth certs
htpasswd -Bc auth/htpasswd admin
openssl req -newkey rsa:4096 -nodes -keyout certs/domain.key -x509 -days 365 -out certs/domain.crt
```

> 생성된 인증서와 htpasswd 파일을 `registry` 컨테이너에 마운트해 HTTPS 보안 통신을 적용한다.

---

#### 5. 요약
