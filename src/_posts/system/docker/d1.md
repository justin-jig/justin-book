
## 📄 `docs/15-docs-and-versioning/image-versioning-1.md`
```markdown
---
title: "이미지 버전 관리 (1) – 태그 전략"
date: 2025-10-23
---

#### 요약  
이미지 버전은 서비스 배포의 일관성을 결정하는 핵심 요소이다.  
명확한 태그 정책을 수립하면 롤백·재현·릴리스 관리가 용이하다.  

**핵심 정리**
- SemVer(`v1.2.3`) 또는 날짜 기반(`2025.10.23`) 버전 체계 사용.  
- 환경별(`dev`, `staging`, `prod`) 태그 병행 운영.  
- `latest` 사용은 최소화하고 안정 버전을 명시.  

##### 참고자료
- [Docker Tag Reference](https://docs.docker.com/engine/reference/commandline/tag/)
- [Semantic Versioning](https://semver.org/)

---

#### 1. 태그 정책 예시
| 환경 | 예시 태그 | 설명 |
|:--|:--|:--|
| 개발 | myapp:dev-20251023 | 임시 개발용 |
| 스테이징 | myapp:stg-1.2.3 | 테스트 배포용 |
| 운영 | myapp:prod-1.2.3 | 안정화 릴리스용 |

---

#### 2. Git 기반 자동 태깅
```bash
git tag -a v1.2.3 -m "Release 1.2.3"
docker build -t myapp:v1.2.3 .
docker push myapp:v1.2.3
````

> Git 태그와 Docker 태그를 동기화해 일관성을 확보한다.

---

#### 3. 롤백 절차

```bash
docker pull myapp:v1.1.9
docker compose -f docker-compose.yml up -d
```

> 명시적 버전으로 재배포하여 예기치 않은 변경 방지.

---

#### 4. 요약

* 명확한 태그 규칙은 운영 안정성을 높인다.
* Git 버전과 Docker 이미지 버전을 일관되게 유지.
* 환경별 태그로 배포 단계를 구분한다.

````

---

## 📄 `docs/15-docs-and-versioning/image-versioning-2.md`
```markdown
---
title: "이미지 버전 관리 (2) – SBOM과 레텐션 정책"
date: 2025-10-23
---

#### 요약  
이미지 버전 관리는 단순한 태그 관리뿐 아니라  
**SBOM(구성 명세서)** 과 **보존 정책(retention)** 을 포함해야 한다.  
이를 통해 보안, 이력, 컴플라이언스를 함께 관리할 수 있다.  

**핵심 정리**
- SBOM을 각 버전에 포함시켜 구성 투명성 확보.  
- Harbor/ECR 등에서 자동 만료(retention policy) 적용.  
- 장기 보존 버전은 별도 `lts` 또는 `archive` 태그로 관리.  

##### 참고자료
- [SBOM with Trivy](https://github.com/aquasecurity/trivy)
- [Harbor Retention Policy Guide](https://goharbor.io/docs/)
- [OCI Image Metadata](https://github.com/opencontainers/image-spec)

---

#### 1. SBOM 첨부 예시
```bash
trivy image --format cyclonedx --output sbom.xml myapp:1.2.3
docker push myapp:1.2.3
````

> SBOM 파일을 함께 보관해 취약점 추적에 활용한다.

---

#### 2. 장기 보존 정책

| 태그           | 설명                           |
| :----------- | :--------------------------- |
| `lts`        | 장기 지원 버전 (Long Term Support) |
| `archive`    | 만료 전 백업용 보관 이미지              |
| `deprecated` | 사용 중단 예정 버전                  |

---

#### 3. 자동 만료 정책 (ECR 예시)

```json
{
  "rules": [
    {
      "rulePriority": 1,
      "selection": { "tagStatus": "any", "countType": "sinceImagePushed", "countUnit": "days", "countNumber": 30 },
      "action": { "type": "expire" }
    }
  ]
}
```

> 30일 이상 지난 이미지는 자동 삭제된다.

---

#### 4. 요약

* SBOM은 이미지 버전의 투명성을 높인다.
* Retention Policy로 저장소 용량과 보안을 함께 관리.
* `lts`, `archive` 태그로 장기 유지 버전을 구분한다.

## 📄 `docs/15-docs-and-versioning/pr-and-changelog.md`
```markdown
---
title: "PR 및 변경 이력 관리 (Pull Requests & Changelog)"
date: 2025-10-23
---

#### 요약  
변경 이력은 협업과 품질 관리의 근간이다.  
PR(Pull Request) 기반 개발 프로세스와 CHANGELOG 관리로  
코드·문서·이미지 변경 내역을 명확히 추적할 수 있다.  

**핵심 정리**
- 모든 변경은 PR 단위로 리뷰 및 승인 절차를 거친다.  
- CHANGELOG는 버전별 주요 변경 내역을 기록한다.  
- 자동 생성 도구(Conventional Changelog, GitHub Release Note)를 활용한다.  

##### 참고자료
- [Keep a Changelog](https://keepachangelog.com/en/1.1.0/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [GitHub Release Notes API](https://docs.github.com/en/rest/releases/releases)

---

#### 1. PR 작성 가이드
| 항목 | 내용 |
|:--|:--|
| 제목 | feat: 새로운 기능 추가 |
| 내용 | 변경 이유, 테스트 방법, 관련 이슈 번호 |
| 라벨 | enhancement / bugfix / docs 등 |

---

#### 2. CHANGELOG 구조
```markdown
# Changelog

## [1.2.3] - 2025-10-23
### Added
- Compose 프로파일 기능 추가

### Fixed
- 이미지 태그 캐시 문제 해결

### Changed
- Node 베이스 이미지 20 → 21 버전 업데이트
````

---

#### 3. 자동 생성 명령

```bash
npx conventional-changelog -p angular -i CHANGELOG.md -s
```

> 커밋 메시지 규칙(`feat`, `fix`, `chore` 등)에 따라 자동 생성.

---

#### 4. 요약

* 모든 변경은 PR 기반으로 기록되어야 한다.
* CHANGELOG로 버전별 변경 이력을 추적한다.
* 자동화된 changelog 생성 도구로 관리 효율성을 높인다.

```